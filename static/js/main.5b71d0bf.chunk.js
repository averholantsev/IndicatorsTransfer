(this.webpackJsonpindicators_transfer=this.webpackJsonpindicators_transfer||[]).push([[0],{292:function(e,t,a){e.exports=a(330)},297:function(e,t,a){},303:function(e,t,a){},323:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),l=a.n(i),o=(a(297),a(298),a(29)),c=a(30),s=a(32),u=a(31),d=a(23),m=a(73),h=a(359),f=a(105),p=(a(303),a(68)),g=a(69),v=a(190),E=a(353),b=a(354),y=a(355),S=a(266),I=a.n(S),D=a(83),O=a(265),x=a.n(O),k=a(53),C=a(334),w=a(335),j=a(357),T=a(358),N=a(261),W=a.n(N),H=a(262),F=a.n(H),B=a(263),_=a.n(B),A=a(264),U=a.n(A),Y=[{name:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f",path:"/send-indicators",icon:r.a.createElement(W.a,null)},{name:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b",path:"/outlay",icon:r.a.createElement(F.a,null)},{name:"\u0422\u0430\u0440\u0438\u0444\u044b",path:"/tariffs",icon:r.a.createElement(_.a,null)},{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",path:"/profile",icon:r.a.createElement(U.a,null)}],M=Object(v.a)((function(e){return{root:{flexGrow:1},button:{"&:hover":{color:"white"}},grow:{flexGrow:1},list:{width:250}}})),L=function(e){var t=M(),a=Object(n.useState)("\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),i=Object(p.a)(a,2),l=i[0],o=i[1],c=Object(n.useState)(!1),s=Object(p.a)(c,2),u=s[0],d=s[1];return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,{position:"relative"},r.a.createElement(b.a,null,r.a.createElement(y.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return d(!0)}},r.a.createElement(x.a,null)),r.a.createElement(D.a,{variant:"h6",className:t.title},l),r.a.createElement("div",{className:t.grow}),r.a.createElement(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:g.b,to:"/logout"},r.a.createElement(I.a,null))),r.a.createElement(k.a,{className:t.drawer,anchor:"left",open:u,onClose:function(){return d(!1)}},r.a.createElement(C.a,{className:t.list},Y.map((function(e){return r.a.createElement(w.a,{button:!0,key:e.name,component:g.b,to:e.path,onClick:function(){d(!1),o(e.name)}},r.a.createElement(j.a,null,e.icon),r.a.createElement(T.a,{primary:e.name}))}))))))},P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{container:!0},this.props.isAuth&&r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(L,null)),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(f.a,{className:"paper"},this.props.children)))}}]),a}(n.Component),K=a(25),R=a(82),V=a(267),q=a.n(V).a.create({baseURL:"https://reacttestproject-70f65.firebaseio.com/"}),G=(a(323),a(360)),z=Object(v.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"15px"},paragraph:{marginTop:"5px"}}})),J=function(){var e=z();return r.a.createElement("div",{className:e.root},r.a.createElement(G.a,null),r.a.createElement(D.a,{className:e.paragraph},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"))},X=a(362),$=a(366),Q=a(365),Z=a(361),ee=a(363),te=a(364),ae=a(152),ne=a.n(ae),re=Object(v.a)({root:{position:"relative",marginTop:"30px"},buttonClose:{position:"absolute",right:"-5px",top:"-5px"}}),ie=function(e){var t=re(),a=e.indicatorsList,n=a.id,i=a.date,l=a.indicators,o=e.costNovogor,c="";switch(i.getMonth()){case 0:c="\u042f\u043d\u0432\u0430\u0440\u044c";break;case 1:c="\u0424\u0435\u0432\u0440\u0430\u043b\u044c";break;case 2:c="\u041c\u0430\u0440\u0442";break;case 3:c="\u0410\u043f\u0440\u0435\u043b\u044c";break;case 4:c="\u041c\u0430\u0439";break;case 5:c="\u0418\u044e\u043d\u044c";break;case 6:c="\u0418\u044e\u043b\u044c";break;case 7:c="\u0410\u0432\u0433\u0443\u0441\u0442";break;case 8:c="\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c";break;case 9:c="\u041e\u043a\u0442\u044f\u0431\u0440\u044c";break;case 10:c="\u041d\u043e\u044f\u0431\u0440\u044c";break;case 11:c="\u0414\u0435\u043a\u0430\u0431\u0440\u044c";break;default:c="\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"}return r.a.createElement(Z.a,{component:f.a,className:t.root},r.a.createElement(y.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(n)},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(ne.a,null)),r.a.createElement(D.a,{variant:"h6",align:"center"},c," ",i.getFullYear()),r.a.createElement(X.a,{"aria-label":"simple table"},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Q.a,null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"),r.a.createElement(Q.a,{align:"center"},"\u0420\u0430\u0441\u0445\u043e\u0434"),r.a.createElement(Q.a,{align:"center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435"))),r.a.createElement($.a,null,l.map((function(e,t){return r.a.createElement(te.a,{key:t},r.a.createElement(Q.a,{component:"th",scope:"row"},e.name),r.a.createElement(Q.a,{align:"center"},e.intake),r.a.createElement(Q.a,{align:"center"},e.outlay))})),r.a.createElement(te.a,null,r.a.createElement(Q.a,{component:"th",scope:"row"},"\u041d\u043e\u0432\u043e\u0433\u043e\u0440"),r.a.createElement(Q.a,{align:"center"},o)))))},le=a(384),oe=a(368),ce=Object(v.a)({root:{flexGrow:1,marginTop:"15px",boxShadow:"none"},label:{fontSize:"1rem"}}),se=function(e){var t=ce(),a=r.a.useState(0),n=Object(p.a)(a,2),i=n[0],l=n[1];return r.a.createElement(f.a,{className:t.root},r.a.createElement(le.a,{value:i,onChange:function(t,a){l(a),e.changeCurrentYear(e.tabsList[a])},indicatorColor:"primary",textColor:"primary",centered:!0},e.tabsList.map((function(e){return r.a.createElement(oe.a,{key:e,label:e,className:t.label})}))))},ue=a(374),de=a(369),me=a(373),he=a(371),fe=a(372),pe=a(370);function ge(e){return r.a.createElement(de.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(pe.a,{id:"alert-dialog-title"},e.dialogTitle),r.a.createElement(he.a,null,r.a.createElement(fe.a,{id:"alert-dialog-description"},e.dialogContent)),r.a.createElement(me.a,null,r.a.createElement(ue.a,{onClick:e.handleClose,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ue.a,{onClick:e.handleContinue,color:"secondary",autoFocus:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}var ve=a(72),Ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={indicatorsList:null,prevIndicators:null,tariffs:null,currentYear:(new Date).getUTCFullYear(),error:null,deleteDialogOpen:!1,deleteIndicatorId:null},e.getDataFromFirebase=function(){var t=localStorage.getItem("token"),a=localStorage.getItem("userId"),n="/users.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),r="/indicators.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),i=q.get(n),l=q.get("/tariffs.json"),o=q.get(r);Promise.all([i,l,o]).then((function(t){console.log("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b | \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445: ",t);var a=e.getUserDetails(t[0].data),n=e.getListOfTariffs(t[1].data),r=e.getListOfIndicators(t[2].data);0!==(r=e.countOutlay(r,a)).length?e.setState({prevIndicators:a,tariffs:n,indicatorsList:r}):e.setState({prevIndicators:a,tariffs:n,error:"\u041f\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})}))},e.getUserDetails=function(e){return e[Object.keys(e)].prevIndicators},e.getListOfTariffs=function(e){return Object.keys(e).map((function(t){var a=e[t];return a.id=t,a}))},e.getListOfIndicators=function(e){var t=Object.keys(e).map((function(t){return{id:t,date:new Date(e[t].currentDate.today),indicators:[{id:"day_electricity",name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:e[t].electricity.day},{id:"night_electricity",name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:e[t].electricity.night},{id:"cold_water",name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:e[t].coldWater.bathroom+e[t].coldWater.kittchen},{id:"hot_water",name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:e[t].hotWater.bathroom+e[t].hotWater.kittchen},{id:"disposal_water",name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:e[t].coldWater.bathroom+e[t].coldWater.kittchen+e[t].hotWater.bathroom+e[t].hotWater.kittchen}]}}));return t.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),t},e.deleteItemFromIndicators=function(){var t=localStorage.getItem("token");q.delete("/indicators/".concat(e.state.deleteIndicatorId,".json?auth=").concat(t)).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteIndicatorId:null}),e.props.enqueueSnackbar("\u041e\u0431\u044a\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!",{variant:"info",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.handleDeleteDialogOpen=function(t){e.setState({deleteDialogOpen:!0,deleteIndicatorId:t})},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeIndicatorFromState(e.state.deleteIndicatorId),e.deleteItemFromIndicators(),e.handleDeleteDialogClose()},e.removeIndicatorFromState=function(t){var a=Object(R.a)(e.state.indicatorsList);a=a.filter((function(e){return e.id!==t})),e.setState({indicatorsList:a})},e.countOutlay=function(e,t){for(var a=Object(R.a)(e),n=function(e){a[e]===a[0]?a[e].indicators=a[e].indicators.map((function(e,a){var n=Object(K.a)({},e);return n.outlay=n.intake-t[a].intake,n})):a[e].indicators=a[e].indicators.map((function(t,n){var r=Object(K.a)({},t);return r.outlay=r.intake-a[e-1].indicators[n].intake,r}))},r=0;r<a.length;r++)n(r);return a},e.countCostNovogor=function(t,a){var n=null;try{n=t.find((function(e){return"cold_water"===e.id})).outlay}catch(c){console.log("\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",c)}var r=null;try{r=t.find((function(e){return"hot_water"===e.id})).outlay}catch(c){console.log("\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",c)}var i=null;try{i=t.find((function(e){return"disposal_water"===e.id})).outlay}catch(c){console.log("\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435",c)}var l=null;try{l=e.state.tariffs.find((function(e){var t=e.name,n=e.dateStart,r=e.dateEnd;return"water"===t&&Date.parse(n)<=a&&Date.parse(r)>=a})).cost}catch(c){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u0443 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}var o=null;try{o=e.state.tariffs.find((function(e){var t=e.name,n=e.dateStart,r=e.dateEnd;return"disposal_water"===t&&Date.parse(n)<=a&&Date.parse(r)>=a})).cost}catch(c){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}return((n+r)*l+i*o).toFixed(2)},e.changeCurrentYear=function(t){e.setState({currentYear:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getDataFromFirebase()}},{key:"render",value:function(){var e=this,t=null;t=null===this.state.indicatorsList&&null===this.state.error?r.a.createElement(J,null):null!==this.state.indicatorsList?(t=this.state.indicatorsList.filter((function(t){return t.date.getUTCFullYear()===e.state.currentYear}))).length>0?t.map((function(t,a){return r.a.createElement(ie,{key:a,indicatorsList:t,costNovogor:e.countCostNovogor(t.indicators,t.date),handleDeleteDialogOpen:e.handleDeleteDialogOpen})})):r.a.createElement("p",{style:{textAlign:"center"}},"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 ".concat(this.state.currentYear," \u0433\u043e\u0434")):r.a.createElement("p",{style:{textAlign:"center"}},this.state.error);for(var a=[],n=(new Date).getUTCFullYear();n>=(new Date).getUTCFullYear()-1;n--)a.push(n);return r.a.createElement("div",null,r.a.createElement(ge,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.","\u0451":!0}),r.a.createElement(D.a,{variant:"h4",align:"center"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"),r.a.createElement(se,{tabsList:a,changeCurrentYear:this.changeCurrentYear}),r.a.createElement("div",{className:"indicatorsList"},t))}}]),a}(n.Component),be=Object(ve.b)(Ee),ye=a(268),Se=a.n(ye),Ie=a(75),De=[{key:"0",text:"\u042f\u043d\u0432\u0430\u0440\u044c",value:0},{key:"1",text:"\u0424\u0435\u0432\u0430\u0440\u043b\u044c",value:1},{key:"2",text:"\u041c\u0430\u0440\u0442",value:2},{key:"3",text:"\u0410\u043f\u0440\u0435\u043b\u044c",value:3},{key:"4",text:"\u041c\u0430\u0439",value:4},{key:"5",text:"\u0418\u044e\u043d\u044c",value:5},{key:"6",text:"\u0418\u044e\u043b\u044c",value:6},{key:"7",text:"\u0410\u0432\u0433\u0443\u0441\u0442",value:7},{key:"8",text:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",value:8},{key:"9",text:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",value:9},{key:"10",text:"\u041d\u043e\u044f\u0431\u0440\u044c",value:10},{key:"11",text:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",value:11}],Oe=a(54),xe=a.n(Oe),ke=(a(328),a(377)),Ce=a(378),we=a(192),je=a(345),Te=a(348),Ne=a(380),We=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={indicators:{ElectricityDay:{value:"",valid:!0},ElectricityNight:{value:"",valid:!0},ColdWaterKittchen:{value:"",valid:!0},ColdWaterBathroom:{value:"",valid:!0},HotWaterKittchen:{value:"",valid:!0},HotWaterBathroom:{value:"",valid:!0}},monthYear:{month:(new Date).getMonth(),year:(new Date).getFullYear()},emailData:{recipient:Ie.RECIPIENT,address:Ie.ADDRESS},modalOpen:!1},e.addIndicatorHandler=function(t,a){var n=a,r=Object(K.a)({},e.state.indicators);r[t].value=n,r[t].valid=!0,e.setState({indicators:r})},e.modalHandlerClose=function(){e.setState({modalOpen:!1})},e.modalHandlerOpen=function(t){for(var a in t.preventDefault(),e.state.indicators){var n=Object(K.a)({},e.state.indicators);if(""===n[a].value||0===n[a].value){var r=Object(K.a)({},e.state.indicators);r[a].valid=!1,e.setState({indicators:r}),e.setState({indicatorsValid:!1})}}e.state.indicators.ElectricityDay.valid&&e.state.indicators.ElectricityNight.valid&&e.state.indicators.ColdWaterKittchen.valid&&e.state.indicators.ColdWaterBathroom.valid&&e.state.indicators.HotWaterKittchen.valid&&e.state.indicators.HotWaterBathroom.valid&&e.setState({modalOpen:!0})},e.sendEmailHandler=function(){var t={recipient:e.state.emailData.recipient,address:e.state.emailData.address,month:De[e.state.monthYear.month].text,year:e.state.monthYear.year,electricityDay:e.state.indicators.ElectricityDay.value,electricityNight:e.state.indicators.ElectricityNight.value,coldWaterKittchen:e.state.indicators.ColdWaterKittchen.value,coldWaterBathroom:e.state.indicators.ColdWaterBathroom.value,hotWaterKittchen:e.state.indicators.HotWaterKittchen.value,hotWaterBathroom:e.state.indicators.HotWaterBathroom.value};Se.a.send(Ie.SERVICE_ID,Ie.TEMPLATE_ID,t,Ie.USER_ID).then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)}))},e.sendIndicators=function(){var t=new Date(e.state.monthYear.year,e.state.monthYear.month,1,5,0,0,0).toISOString(),a={electricity:{day:e.state.indicators.ElectricityDay.value,night:e.state.indicators.ElectricityNight.value},coldWater:{kittchen:e.state.indicators.ColdWaterKittchen.value,bathroom:e.state.indicators.ColdWaterBathroom.value},hotWater:{kittchen:e.state.indicators.HotWaterKittchen.value,bathroom:e.state.indicators.HotWaterBathroom.value},currentDate:{today:t,year:e.state.monthYear.year},userId:localStorage.getItem("userId")},n=localStorage.getItem("token");q.post("/indicators.json?auth=".concat(n),a).then((function(t){e.setState({modalOpen:!1}),e.sendEmailHandler(),e.props.history.push("/outlay")})).catch((function(e){console.log(e)}))},e.getCurrentMonth=function(){return(new Date).getMonth()},e.getCurrentYear=function(){for(var e=(new Date).getFullYear(),t=[],a=2;a>=0;a--)t.push({key:e-a,text:e-a,value:e-a});return t},e.setStateMonth=function(t,a){var n=a,r=Object(K.a)({},e.state.monthYear);r.month=n,e.setState({monthYear:r})},e.setStateYear=function(t,a){var n=a,r=Object(K.a)({},e.state.monthYear);r.year=n,e.setState({monthYear:r})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f";return r.a.createElement("div",null,r.a.createElement(de.a,{open:this.state.modalOpen,onClose:this.modalHandlerClose,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(pe.a,{id:"alert-dialog-title"},r.a.createElement(D.a,{variant:"h5",align:"center"},"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0437\u0430"," ",De[this.state.monthYear.month].text," ",this.state.monthYear.year," \u0433.")),r.a.createElement(he.a,{dividers:!0},r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h6",align:"center"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},"\u0414\u0435\u043d\u044c:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},this.state.indicators.ElectricityDay.value)),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},"\u041d\u043e\u0447\u044c:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},this.state.indicators.ElectricityNight.value))),r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h6",align:"center"},"\u041a\u0443\u0445\u043d\u044f")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},this.state.indicators.ColdWaterKittchen.value)),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},this.state.indicators.HotWaterKittchen.value))),r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h6",align:"center"},"\u0412\u0430\u043d\u043d\u0430\u044f")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},this.state.indicators.ColdWaterBathroom.value)),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(D.a,{variant:"body1",align:"center"},this.state.indicators.HotWaterBathroom.value))))),r.a.createElement(me.a,null,r.a.createElement(ue.a,{onClick:this.modalHandlerClose,color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ue.a,{onClick:this.sendIndicators,color:"primary",autoFocus:!0},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),r.a.createElement(D.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u041f\u043e\u0434\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),r.a.createElement(ke.a,{className:"card"},r.a.createElement(Ce.a,{className:"cardPadding"},r.a.createElement(h.a,{container:!0,spacing:2},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h5",className:"headerMargin"},"\u041c\u0435\u0441\u044f\u0446 \u0438 \u0433\u043e\u0434")),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(we.a,{style:{width:"100%"}},r.a.createElement(je.a,null,"\u041c\u0435\u0441\u044f\u0446"),r.a.createElement(Te.a,{value:this.state.monthYear.month||0,onChange:function(t){return e.setStateMonth(t,t.target.value)}},De.map((function(e){return r.a.createElement(Ne.a,{key:e.key,value:e.value},e.text)}))))),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(we.a,{style:{width:"100%"}},r.a.createElement(je.a,null,"\u0413\u043e\u0434"),r.a.createElement(Te.a,{value:this.state.monthYear.year||2020,onChange:function(t){return e.setStateYear(t,t.target.value)}},this.getCurrentYear().map((function(e){return r.a.createElement(Ne.a,{key:e.key,value:e.value},e.text)})))))),r.a.createElement(h.a,{container:!0,spacing:2},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h5",className:"headerMargin"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(xe.a,{style:{width:"100%"},variant:"standard",label:"\u0414\u0435\u043d\u044c",currencySymbol:"",value:this.state.indicators.ElectricityDay.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("ElectricityDay",a)},error:!this.state.indicators.ElectricityDay.valid,helperText:this.state.indicators.ElectricityDay.valid?null:t})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(xe.a,{style:{width:"100%"},variant:"standard",label:"\u041d\u043e\u0447\u044c",currencySymbol:"",value:this.state.indicators.ElectricityNight.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("ElectricityNight",a)},error:!this.state.indicators.ElectricityNight.valid,helperText:this.state.indicators.ElectricityNight.valid?null:t}))),r.a.createElement(h.a,{container:!0,spacing:2},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h5",className:"headerMargin"},"\u041a\u0443\u0445\u043d\u044f")),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(xe.a,{style:{width:"100%"},variant:"standard",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.ColdWaterKittchen.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("ColdWaterKittchen",a)},error:!this.state.indicators.ColdWaterKittchen.valid,helperText:this.state.indicators.ColdWaterKittchen.valid?null:t})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(xe.a,{style:{width:"100%"},variant:"standard",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.HotWaterKittchen.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("HotWaterKittchen",a)},error:!this.state.indicators.HotWaterKittchen.valid,helperText:this.state.indicators.HotWaterKittchen.valid?null:t}))),r.a.createElement(h.a,{container:!0,spacing:2},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h5",className:"headerMargin"},"\u0412\u0430\u043d\u043d\u0430\u044f")),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(xe.a,{style:{width:"100%"},variant:"standard",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.ColdWaterBathroom.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("ColdWaterBathroom",a)},error:!this.state.indicators.ColdWaterBathroom.valid,helperText:this.state.indicators.ColdWaterBathroom.valid?null:t})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(xe.a,{style:{width:"100%"},variant:"standard",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.HotWaterBathroom.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("HotWaterBathroom",a)},error:!this.state.indicators.HotWaterBathroom.valid,helperText:this.state.indicators.HotWaterBathroom.valid?null:t}))),r.a.createElement(h.a,{container:!0,justify:"center",spacing:2},r.a.createElement(h.a,{item:!0,xs:12,style:{textAlign:"center",marginTop:"15px"}},r.a.createElement(ue.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:this.modalHandlerOpen},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))))}}]),a}(n.Component),He=Object(d.g)(We),Fe=a(156),Be=a(33),_e=a(382),Ae=a(272),Ue=a.n(Ae),Ye=a(273),Me=a.n(Ye),Le=Object(v.a)({root:{margin:"20px 0",position:"relative"},cardPadding:{paddingBottom:"16px !important",paddingTop:"26px !important"},row:{display:"flex"},textField:{flexGrow:1},textFieldMargin:{marginRight:"15px",marginBottom:"15px"},selectPadding:{display:"flex",flexBasis:"13rem"},buttonClose:{position:"absolute",right:"0"},buttonEdit:{position:"absolute",right:"30px"},buttonIconSuccess:{color:"#4caf50"},buttonSuccess:{"&:hover":{backgorundColor:"rgba(243, 243, 243, 0.04) !important"}}}),Pe=function(e){var t=Le(),a=e.tariff,i=a.id,l=a.name,o=a.cost,c=a.dateEnd,s=a.dateStart,u=Object(n.useState)(e.disabled),d=Object(p.a)(u,2),m=d[0],f=d[1];return r.a.createElement(ke.a,{className:t.root},m?r.a.createElement(y.a,{className:t.buttonEdit,"aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",component:"span",color:"primary",onClick:function(){return f(!1)},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(Ue.a,null)):r.a.createElement(y.a,{className:t.buttonEdit+" "+t.buttonSuccess,"aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){f(!0),i?e.updateItemInTariffs(i):e.insertItemToTariffs()},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(Me.a,{className:t.buttonIconSuccess})),r.a.createElement(y.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(i)},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(ne.a,null)),r.a.createElement(Ce.a,{className:t.cardPadding},r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12,className:t.row},r.a.createElement(we.a,{className:t.textFieldMargin+" "+t.textField+" "+t.selectPadding},r.a.createElement(je.a,null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(Te.a,{value:l,onChange:function(t){return e.updateTariffInState(i,"name",t.target.value)},disabled:m},r.a.createElement(Ne.a,{value:"water"},"\u041f\u043e\u0434\u0430\u0447\u0430 \u0432\u043e\u0434\u044b"),r.a.createElement(Ne.a,{value:"hot_water"},"\u041f\u043e\u0434\u043e\u0433\u0440\u0435\u0432 \u0432\u043e\u0434\u044b"),r.a.createElement(Ne.a,{value:"disposal_water"},"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435"),r.a.createElement(Ne.a,{value:"electricity_day"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u0434\u0435\u043d\u044c"),r.a.createElement(Ne.a,{value:"electricity_night"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u043d\u043e\u0447\u044c"))),r.a.createElement(xe.a,{className:t.textField,label:"\u0422\u0430\u0440\u0438\u0444",currencySymbol:"\u20bd",value:o,minimumValue:"0",maximumValue:"5000",disabled:m,onChange:function(t,a){return e.updateTariffInState(i,"cost",a)}})),r.a.createElement(h.a,{item:!0,xs:12,className:t.row},r.a.createElement(Be.a,{utils:Fe.a},r.a.createElement(_e.a,{label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d c",format:"dd.MM.yyyy",value:s,className:t.textFieldMargin+" "+t.textField,KeyboardButtonProps:{"aria-label":"change date"},disabled:m,onChange:function(t){return e.updateTariffInState(i,"dateStart",t)}}),r.a.createElement(_e.a,{label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u043f\u043e",format:"dd.MM.yyyy",value:c,className:t.textField,KeyboardButtonProps:{"aria-label":"change date"},disabled:m,onChange:function(t){return e.updateTariffInState(i,"dateEnd",t)}}))))))},Ke=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={tariffs:[],deleteDialogOpen:!1,deleteTariffId:null,addButtonDisabled:!1},e.getListOfTariffs=function(){q.get("/tariffs.json").then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=Object.keys(t.data).map((function(e){var a=t.data[e];return a.id=e,a}));e.setState({tariffs:a})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.deleteItemFromTariffs=function(){q.delete("/tariffs/".concat(e.state.deleteTariffId,".json")).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteTariffId:null}),e.props.enqueueSnackbar("\u041e\u0431\u044a\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!",{variant:"info",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateItemInTariffs=function(t){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438",t);var a=e.state.tariffs.find((function(e){return e.id===t})),n={cost:a.cost,dateEnd:a.dateEnd,dateStart:a.dateStart,name:a.name};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",n),q.patch("/tariffs/".concat(t,".json"),n).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.insertItemToTariffs=function(){console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438");var t=e.state.tariffs[0],a={cost:t.cost,dateEnd:t.dateEnd,dateStart:t.dateStart,name:t.name};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",a),q.post("/tariffs.json",a).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({addButtonDisabled:!1}),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.handleDeleteDialogOpen=function(t){"undefined"!==typeof t?e.setState({deleteDialogOpen:!0,deleteTariffId:t}):e.removeTariffFromState(t)},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeTariffFromState(e.state.deleteTariffId),e.deleteItemFromTariffs(),e.handleDeleteDialogClose()},e.addTariffToState=function(){var t=Object(R.a)(e.state.tariffs);t.unshift({cost:0,dateEnd:null,dateStart:null,name:""}),e.setState({tariffs:t,addButtonDisabled:!0})},e.removeTariffFromState=function(t){var a=Object(R.a)(e.state.tariffs);a=a.filter((function(e){return e.id!==t})),e.state.addButtonDisabled?e.setState({tariffs:a,addButtonDisabled:!1}):e.setState({tariffs:a})},e.updateTariffInState=function(t,a,n){var r=Object(R.a)(e.state.tariffs),i=r.findIndex((function(e){return e.id===t}));r[i][a]=n,e.setState({tariffs:r})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getListOfTariffs()}},{key:"render",value:function(){var e=this,t=null;return t=0===this.state.tariffs.length?r.a.createElement(J,null):this.state.tariffs.map((function(t,a){return r.a.createElement(Pe,{key:"undefined"!==typeof t.id?t.id:a,tariff:t,disabled:"undefined"!==typeof t.id,handleDeleteDialogOpen:e.handleDeleteDialogOpen,handleDeleteDialogContinue:e.handleDeleteDialogContinue,updateItemInTariffs:e.updateItemInTariffs,updateTariffInState:e.updateTariffInState,insertItemToTariffs:e.insertItemToTariffs})})),r.a.createElement("div",null,r.a.createElement(ge,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.","\u0451":!0}),r.a.createElement(D.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u0422\u0430\u0440\u0438\u0444\u044b"),r.a.createElement(ue.a,{onClick:function(){return e.addTariffToState(t)},color:"primary",disabled:this.state.addButtonDisabled},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444"),t)}}]),a}(n.Component),Re=Object(ve.b)(Ke),Ve=a(151),qe=(a(329),a(276)),Ge=a.n(qe),ze=a(381),Je=a(191),Xe=Object(v.a)((function(e){return Object(Je.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),$e=function(e){var t=Xe();return r.a.createElement(ze.a,Object.assign({className:t.root,variant:"outlined",inputProps:{className:t.input}},e))},Qe=a(379),Ze=a(274),et=a.n(Ze),tt=a(275),at=a.n(tt),nt=Object(v.a)((function(e){return Object(Je.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),rt=function(e){var t=nt(),a=r.a.useState({showPassword:!1}),n=Object(p.a)(a,2),i=n[0],l=n[1];return r.a.createElement(ze.a,Object.assign({className:t.root,variant:"outlined",type:i.showPassword?"text":"password",inputProps:{className:t.input},InputProps:{endAdornment:r.a.createElement(Qe.a,{position:"end"},r.a.createElement(y.a,{"aria-label":"toggle password visibility",onClick:function(){l(Object(K.a)(Object(K.a)({},i),{},{showPassword:!i.showPassword}))},edge:"end"},i.showPassword?r.a.createElement(et.a,null):r.a.createElement(at.a,null)))}},e))},it=a(4),lt=Object(it.a)({root:{width:"100%",textTransform:"none",margin:"30px 0 10px 0"}})(ue.a),ot=function(e){return r.a.createElement(lt,Object.assign({variant:"contained",color:"primary"},e),e.children)},ct=a(383),st=Object(it.a)({root:{marginBottom:"10px"}})(ct.a),ut=function(e){return r.a.createElement(st,e,e.children)},dt=function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}},mt=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},ht=function(e){return function(t){setTimeout((function(){t(mt())}),1e3*e)}},ft=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",rememberMe:!1,validateFields:{email:!1,password:!1},fieldValidationErrors:{email:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!",password:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"},willSend:!0},e.inputHandler=function(t){var a=t.target.name,n=t.target.value;e.validation(a,n),e.setState(Object(Ve.a)({},a,n))},e.validation=function(t,a){var n=Object(K.a)({},e.state.validateFields),r=Object(K.a)({},e.state.fieldValidationErrors);switch(t){case"email":n.email=/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(a),0===a.length?r.email="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!":r.email="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0447\u0442\u044b";break;case"password":n.password=a.length>=6,0===a.length?r.password="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!":r.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}e.setState({validateFields:n,fieldValidationErrors:r})},e.checkboxHandler=function(){var t=e.state.rememberMe;e.setState({rememberMe:!t})},e.formSenderHandler=function(){e.state.validateFields.email&&e.state.validateFields.password?(e.setState({willSend:!0}),e.props.onAuth(e.state.email,e.state.password,e.state.rememberMe)):e.setState({willSend:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=!1,t=!1;return this.state.willSend||(e=!this.state.validateFields.email,t=!this.state.validateFields.password),r.a.createElement("div",{className:"auth_container"},r.a.createElement("form",null,r.a.createElement("div",{className:"lockIconContainer"},r.a.createElement("div",{className:"roundIcon"},r.a.createElement(Ge.a,null))),r.a.createElement("h1",{className:"authHeader"},"\u0412\u0445\u043e\u0434 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),this.props.errorMessage?r.a.createElement(ut,{severity:"error"},this.props.errorMessage):null,r.a.createElement($e,{key:"email",id:"email",label:"\u041f\u043e\u0447\u0442\u0430",name:"email",error:e,helperText:e?this.state.fieldValidationErrors.email:null,onChange:this.inputHandler,value:this.state.email}),r.a.createElement(rt,{key:"password",id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",error:t,helperText:t?this.state.fieldValidationErrors.password:null,onChange:this.inputHandler,value:this.state.password}),r.a.createElement(ot,{onClick:this.formSenderHandler},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))}}]),a}(n.Component),pt=Object(m.b)((function(e){return{isAuth:null!==e.token,loading:e.loading,errorMessage:e.error}}),(function(e){return{onAuth:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"});var n={email:e,password:t,returnSecureToken:!0},r="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(Ie.AUTH_API_KEY);q.post(r,n).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),a(dt(e.data.idToken,e.data.localId)),a(ht(e.data.expiresIn))})).catch((function(e){console.log(e),a(function(e){return{type:"AUTH_FAIL",error:e}}(e.response.data.error))}))}}(t,a))}}}))(ft),gt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onLogout(this.props.history)}},{key:"render",value:function(){return r.a.createElement(d.a,{to:"/"})}}]),a}(n.Component),vt=Object(m.b)(null,(function(e){return{onLogout:function(){return e(mt())}}}))(gt),Et=Object(v.a)({root:{margin:"20px 0"},cardPadding:{padding:"16px !important"},field:{width:"100%"},buttonPosition:{textAlign:"center"}}),bt=function(e){var t=Et(),a=e.userDetails,n=a.firstName,i=a.lastName,l=a.userEmail,o=a.accountantEmail,c=a.address,s=a.prevIndicators,u=a.prevIndicatorsDate;return r.a.createElement(ke.a,{className:t.root},r.a.createElement(Ce.a,{className:t.cardPadding},r.a.createElement(h.a,{container:!0,spacing:3},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h5",align:"center"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(ze.a,{label:"\u0418\u043c\u044f",value:n,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("firstName",t.target.value)}})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(ze.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:i,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("lastName",t.target.value)}})),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(ze.a,{label:"\u0410\u0434\u0440\u0435\u0441",value:c,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("address",t.target.value)}})),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(ze.a,{label:"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430",value:l,disabled:!0,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("userEmail",t.target.value)}})),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(ze.a,{label:"\u041f\u043e\u0447\u0442\u0430 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u0438",value:o,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("accountantEmail",t.target.value)}})),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"h5",align:"center"},"\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438")),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(Be.a,{utils:Fe.a},r.a.createElement(_e.a,{className:t.field,label:"\u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439",format:"dd.MM.yyyy",value:u,KeyboardButtonProps:{"aria-label":"change date"},onChange:function(t){return e.updateUserDataInState("prevIndicatorsDate",t)}}))),s.map((function(a,n){return r.a.createElement(h.a,{key:n,item:!0,xs:6},r.a.createElement(xe.a,{className:t.field,label:a.name,currencySymbol:"",value:a.intake,minimumValue:"0",onChange:function(t,n){return e.updateIndicatorsInState(a.id,n)}}))})),r.a.createElement(h.a,{className:t.buttonPosition,item:!0,xs:12},r.a.createElement(ue.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){e.updateUserDetails(e.userId)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))},yt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={userDetails:null,userId:null},e.getUserDetails=function(t){console.log("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e UserId: ",t);var a=localStorage.getItem("token");q.get("/users.json?auth=".concat(a,'&orderBy="userId"&equalTo="').concat(t,'"')).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=t.data[Object.keys(t.data)];e.setState({userDetails:a,userId:Object.keys(t.data)[0]})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.updateUserDetails=function(t){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u043f\u043e Id: ",t);var a=e.state.userDetails,n=localStorage.getItem("token");q.patch("/users/".concat(t,".json?auth=").concat(n),a).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateUserDataInState=function(t,a){var n=Object(K.a)({},e.state.userDetails);n[t]=a,e.setState({userDetails:n})},e.updateIndicatorsInState=function(t,a){var n=Object(K.a)({},e.state.userDetails),r=n.prevIndicators.findIndex((function(e){return e.id===t}));n.prevIndicators[r].intake=a,e.setState({userDetails:n})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getUserDetails(localStorage.getItem("userId"))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),null===this.state.userDetails?r.a.createElement(J,null):r.a.createElement(bt,{userDetails:this.state.userDetails,userId:this.state.userId,updateUserDataInState:this.updateUserDataInState,updateIndicatorsInState:this.updateIndicatorsInState,updateUserDetails:this.updateUserDetails}))}}]),a}(n.Component),St=Object(ve.b)(yt),It=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var e=r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/auth",component:pt}),r.a.createElement(d.a,{to:"/auth"}));return this.props.isAuth&&(e=r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/outlay",component:be}),r.a.createElement(d.b,{path:"/send-indicators",component:He}),r.a.createElement(d.b,{path:"/tariffs",component:Re}),r.a.createElement(d.b,{path:"/profile",component:St}),r.a.createElement(d.b,{path:"/logout",component:vt}),r.a.createElement(d.a,{to:"/send-indicators"}))),r.a.createElement(P,{isAuth:this.props.isAuth},e)}}]),a}(n.Component),Dt=Object(m.b)((function(e){return{isAuth:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(mt());else{var n=localStorage.getItem("userId");e(dt(t,n)),e(ht((a.getTime()-(new Date).getTime())/1e3))}}else e(mt())}))}}}))(It);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=a(102),xt=a(277),kt=a(42),Ct=Object(kt.a)(),wt=function(e,t){return Object(K.a)(Object(K.a)({},e),t)},jt={token:null,userId:null,error:null,loading:!1},Tt=function(e){return wt(e,{error:null,loading:!0})},Nt=function(e,t){return wt(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},Wt=function(e,t){var a;return a=401===t.error?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",wt(e,{error:a,loading:!1})},Ht=function(e){return wt(e,{token:null,userId:null})},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Tt(e);case"AUTH_SUCCESS":return Nt(e,t);case"AUTH_FAIL":return Wt(e,t);case"AUTH_LOGOUT":return Ht(e);default:return e}},Bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ot.c,_t=Object(Ot.d)(Ft,Bt(Object(Ot.a)(xt.a))),At=r.a.createElement(m.a,{store:_t},r.a.createElement(g.a,{history:Ct,basename:"/"},r.a.createElement(ve.a,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(Dt,null))));l.a.render(At,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},75:function(e){e.exports=JSON.parse('{"SERVICE_ID":"gmail","RECIPIENT":"anny11533@gmail.com","ADDRESS":"\u0443\u043b. \u041c\u0430\u043a\u0430\u0440\u0435\u043d\u043a\u043e, 6 - \u043a\u0432. 88","TEMPLATE_ID":"template_83dCi3ca","USER_ID":"user_rEIgP6Z8hPXkwIosFYkR7","AUTH_API_KEY":"AIzaSyCQ-YIBbLpl1SOF7KzaSR0v7HLz61N-yno"}')}},[[292,1,2]]]);
//# sourceMappingURL=main.5b71d0bf.chunk.js.map