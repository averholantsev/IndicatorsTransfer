(this.webpackJsonpindicators_transfer=this.webpackJsonpindicators_transfer||[]).push([[0],{433:function(e,t,a){e.exports=a(586)},438:function(e,t,a){},444:function(e,t,a){},463:function(e,t,a){},531:function(e,t,a){},582:function(e,t,a){},585:function(e,t,a){},586:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),o=a.n(i),l=(a(438),a(439),a(54)),c=a(55),s=a(58),d=a(57),u=a(34),m=a(95),h=a(622),f=a(154),v=(a(444),a(90)),p=a(92),E=a(335),g=a(615),b=a(616),y=a(617),w=a(384),C=a.n(w),S=a(106),O=a(383),k=a.n(O),N=a(650),j=a(591),I=a(592),x=a(620),D=a(621),T=a(380),W=a.n(T),H=a(381),B=a.n(H),_=a(382),A=a.n(_),F=[{name:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f",path:"/send-indicators",icon:r.a.createElement(W.a,null)},{name:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b",path:"/outlay",icon:r.a.createElement(B.a,null)},{name:"\u0422\u0430\u0440\u0438\u0444\u044b",path:"/tariffs",icon:r.a.createElement(A.a,null)}],Y=Object(E.a)((function(e){return{root:{flexGrow:1},button:{"&:hover":{color:"white"}},grow:{flexGrow:1},list:{width:250}}})),K=function(e){var t=Y(),a=Object(n.useState)("\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),i=Object(v.a)(a,2),o=i[0],l=i[1],c=Object(n.useState)(!1),s=Object(v.a)(c,2),d=s[0],u=s[1];return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"relative"},r.a.createElement(b.a,null,r.a.createElement(y.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return u(!0)}},r.a.createElement(k.a,null)),r.a.createElement(S.a,{variant:"h6",className:t.title},o),r.a.createElement("div",{className:t.grow}),r.a.createElement(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:p.b,to:"/logout"},r.a.createElement(C.a,null))),r.a.createElement(N.a,{className:t.drawer,anchor:"left",open:d,onClose:function(){return u(!1)},onOpen:function(){return console.log("\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u043a\u0440\u044b\u0442")},disableBackdropTransition:!0},r.a.createElement(j.a,{className:t.list},F.map((function(e){return r.a.createElement(I.a,{button:!0,key:e.name,component:p.b,to:e.path,onClick:function(){u(!1),l(e.name)}},r.a.createElement(x.a,null,e.icon),r.a.createElement(D.a,{primary:e.name}))}))))))},M=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{container:!0},this.props.isAuth&&r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(K,null)),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(f.a,{className:"paper"},this.props.children)))}}]),a}(n.Component),L=a(43),P=a(135),U=a(385),R=a.n(U).a.create({baseURL:"https://reacttestproject-70f65.firebaseio.com/"}),V=a(631),G=(a(463),a(624)),z=a(628),J=a(627),X=a(623),$=a(625),Q=a(626),Z=function(e){var t=e.indicatorsList,a=t.date,n=t.indicators,i=e.costNovogor,o="";switch(a.getMonth()){case 0:o="\u042f\u043d\u0432\u0430\u0440\u044c";break;case 1:o="\u0424\u0435\u0432\u0440\u0430\u043b\u044c";break;case 2:o="\u041c\u0430\u0440\u0442";break;case 3:o="\u0410\u043f\u0440\u0435\u043b\u044c";break;case 4:o="\u041c\u0430\u0439";break;case 5:o="\u0418\u044e\u043d\u044c";break;case 6:o="\u0418\u044e\u043b\u044c";break;case 7:o="\u0410\u0432\u0433\u0443\u0441\u0442";break;case 8:o="\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c";break;case 9:o="\u041e\u043a\u0442\u044f\u0431\u0440\u044c";break;case 10:o="\u041d\u043e\u044f\u0431\u0440\u044c";break;case 11:o="\u0414\u0435\u043a\u0430\u0431\u0440\u044c";break;default:o="\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"}return r.a.createElement(X.a,{component:f.a,style:{marginTop:"30px"}},r.a.createElement(S.a,{variant:"h6",align:"center"},o," ",a.getFullYear()),r.a.createElement(G.a,{"aria-label":"simple table"},r.a.createElement($.a,null,r.a.createElement(Q.a,null,r.a.createElement(J.a,null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"),r.a.createElement(J.a,{align:"center"},"\u0420\u0430\u0441\u0445\u043e\u0434"),r.a.createElement(J.a,{align:"center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435"))),r.a.createElement(z.a,null,n.map((function(e,t){return r.a.createElement(Q.a,{key:t},r.a.createElement(J.a,{component:"th",scope:"row"},e.name),r.a.createElement(J.a,{align:"center"},e.intake),r.a.createElement(J.a,{align:"center"},e.outlay))})),r.a.createElement(Q.a,null,r.a.createElement(J.a,{component:"th",scope:"row"},"\u041d\u043e\u0432\u043e\u0433\u043e\u0440"),r.a.createElement(J.a,{align:"center"},i)))))},q=a(649),ee=a(630),te=Object(E.a)({root:{flexGrow:1,marginTop:"15px",boxShadow:"none"},label:{fontSize:"1rem"}}),ae=function(e){var t=te(),a=r.a.useState(0),n=Object(v.a)(a,2),i=n[0],o=n[1];return r.a.createElement(f.a,{className:t.root},r.a.createElement(q.a,{value:i,onChange:function(t,a){o(a),e.changeCurrentYear(e.tabsList[a])},indicatorColor:"primary",textColor:"primary",centered:!0},e.tabsList.map((function(e){return r.a.createElement(ee.a,{key:e,label:e,className:t.label})}))))},ne=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={indicatorsList:[],prevIndicators:[{name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:18572},{name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:6699},{name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:402},{name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:420},{name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:822}],tariffs:[],currentYear:(new Date).getUTCFullYear(),error:null},e.getListOfIndicators=function(){R.get("/indicators.json").then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=Object.keys(t.data).map((function(e){return{id:e,date:new Date(t.data[e].CurrentDate.today),indicators:[{id:"day_electricity",name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:Number(t.data[e].Electricity.Day)},{id:"night_electricity",name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:Number(t.data[e].Electricity.Night)},{id:"cold_water",name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:Number(t.data[e].ColdWater.Bathroom)+Number(t.data[e].ColdWater.Kittchen)},{id:"hot_water",name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:Number(t.data[e].HotWater.Bathroom)+Number(t.data[e].HotWater.Kittchen)},{id:"disposal_water",name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:Number(t.data[e].ColdWater.Bathroom)+Number(t.data[e].ColdWater.Kittchen)+Number(t.data[e].HotWater.Bathroom)+Number(t.data[e].HotWater.Kittchen)}]}}));a.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),e.setState({indicatorsList:e.countOutlay(a)})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.getListOfTariffs=function(){R.get("/tariffs.json").then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=Object.keys(t.data).map((function(e){var a=t.data[e];return a.id=e,a}));e.setState({tariffs:a})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.countOutlay=function(t){for(var a=Object(P.a)(t),n=function(t){a[t]===a[0]?a[t].indicators=a[t].indicators.map((function(t,a){var n=Object(L.a)({},t);return n.outlay=n.intake-e.state.prevIndicators[a].intake,n})):a[t].indicators=a[t].indicators.map((function(e,n){var r=Object(L.a)({},e);return r.outlay=r.intake-a[t-1].indicators[n].intake,r}))},r=0;r<a.length;r++)n(r);return a},e.countCostNovogor=function(t,a){var n=null;try{n=t.find((function(e){return"cold_water"===e.id})).outlay}catch(c){console.log("\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",c)}var r=null;try{r=t.find((function(e){return"hot_water"===e.id})).outlay}catch(c){console.log("\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",c)}var i=null;try{i=t.find((function(e){return"disposal_water"===e.id})).outlay}catch(c){console.log("\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435",c)}var o=null;try{o=e.state.tariffs.find((function(e){var t=e.name,n=e.dateStart,r=e.dateEnd;return"water"===t&&Date.parse(n)<=a&&Date.parse(r)>=a})).cost}catch(c){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u0443",c)}var l=null;try{l=e.state.tariffs.find((function(e){var t=e.name,n=e.dateStart,r=e.dateEnd;return"disposal_water"===t&&Date.parse(n)<=a&&Date.parse(r)>=a})).cost}catch(c){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435",c)}return((n+r)*o+i*l).toFixed(2)},e.changeCurrentYear=function(t){e.setState({currentYear:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getListOfIndicators(),this.getListOfTariffs()}},{key:"render",value:function(){var e=this,t=null;t=0===this.state.indicatorsList.length&&null==this.state.error?r.a.createElement(V.a,{active:!0,inline:"centered"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"):this.state.indicatorsList.length>0?(t=this.state.indicatorsList.filter((function(t){return t.date.getUTCFullYear()===e.state.currentYear}))).length>0?t.map((function(t,a){return r.a.createElement(Z,{key:a,indicatorsList:t,costNovogor:e.countCostNovogor(t.indicators,t.date)})})):r.a.createElement("p",{style:{textAlign:"center"}},"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 ".concat(this.state.currentYear," \u0433\u043e\u0434")):r.a.createElement("p",{style:{textAlign:"center"}},this.state.error);for(var a=[],n=(new Date).getUTCFullYear();n>=(new Date).getUTCFullYear()-1;n--)a.push(n);return r.a.createElement("div",{className:"outlayContainer"},r.a.createElement(S.a,{variant:"h4",align:"center"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"),r.a.createElement(ae,{tabsList:a,changeCurrentYear:this.changeCurrentYear}),r.a.createElement("div",{className:"indicatorsList"},t))}}]),a}(n.Component),re=a(386),ie=a.n(re),oe=a(97),le=[{key:"0",text:"\u042f\u043d\u0432\u0430\u0440\u044c",value:0},{key:"1",text:"\u0424\u0435\u0432\u0430\u0440\u043b\u044c",value:1},{key:"2",text:"\u041c\u0430\u0440\u0442",value:2},{key:"3",text:"\u0410\u043f\u0440\u0435\u043b\u044c",value:3},{key:"4",text:"\u041c\u0430\u0439",value:4},{key:"5",text:"\u0418\u044e\u043d\u044c",value:5},{key:"6",text:"\u0418\u044e\u043b\u044c",value:6},{key:"7",text:"\u0410\u0432\u0433\u0443\u0441\u0442",value:7},{key:"8",text:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",value:8},{key:"9",text:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",value:9},{key:"10",text:"\u041d\u043e\u044f\u0431\u0440\u044c",value:10},{key:"11",text:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",value:11}],ce=a(387),se=function(e){var t=r.a.createElement("div",{className:"ui pointing red basic label"},e.errorMessage);return r.a.createElement("div",{className:e.classEnter},r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement(ce.a,{decimalScale:"2",decimalSeparator:".",allowNegative:!1,id:e.id,placeholder:e.placeholder,name:e.name,onChange:e.changed,value:e.value}),e.invalid?null:t)},de=a(646),ue=(a(531),a(632)),me=a(635),he=a(634),fe=a(633),ve=a(636),pe=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={indicators:{ElectricityDay:{value:"",valid:!0},ElectricityNight:{value:"",valid:!0},ColdWaterKittchen:{value:"",valid:!0},ColdWaterBathroom:{value:"",valid:!0},HotWaterKittchen:{value:"",valid:!0},HotWaterBathroom:{value:"",valid:!0}},monthYear:{month:(new Date).getMonth(),year:(new Date).getFullYear()},emailData:{recipient:oe.RECIPIENT,address:oe.ADDRESS},modalOpen:!1},e.addIndicatorHandler=function(t,a){var n=a.target.value,r=Object(L.a)({},e.state.indicators);r[t].value=n,r[t].valid=!0,e.setState({indicators:r})},e.modalHandlerClose=function(){e.setState({modalOpen:!1})},e.modalHandlerOpen=function(t){for(var a in t.preventDefault(),e.state.indicators){if(""===Object(L.a)({},e.state.indicators)[a].value){var n=Object(L.a)({},e.state.indicators);n[a].valid=!1,e.setState({indicators:n}),e.setState({indicatorsValid:!1})}}e.state.indicators.ElectricityDay.valid&&e.state.indicators.ElectricityNight.valid&&e.state.indicators.ColdWaterKittchen.valid&&e.state.indicators.ColdWaterBathroom.valid&&e.state.indicators.HotWaterKittchen.valid&&e.state.indicators.HotWaterBathroom.valid&&e.setState({modalOpen:!0})},e.sendEmailHandler=function(){var t={recipient:e.state.emailData.recipient,address:e.state.emailData.address,month:le[e.state.monthYear.month].text,year:e.state.monthYear.year,electricityDay:e.state.indicators.ElectricityDay.value,electricityNight:e.state.indicators.ElectricityNight.value,coldWaterKittchen:e.state.indicators.ColdWaterKittchen.value,coldWaterBathroom:e.state.indicators.ColdWaterBathroom.value,hotWaterKittchen:e.state.indicators.HotWaterKittchen.value,hotWaterBathroom:e.state.indicators.HotWaterBathroom.value};ie.a.send(oe.SERVICE_ID,oe.TEMPLATE_ID,t,oe.USER_ID).then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)}))},e.sendIndicators=function(){var t=new Date(e.state.monthYear.year,e.state.monthYear.month,1,5,0,0,0).toISOString(),a={Electricity:{Day:e.state.indicators.ElectricityDay.value,Night:e.state.indicators.ElectricityNight.value},ColdWater:{Kittchen:e.state.indicators.ColdWaterKittchen.value,Bathroom:e.state.indicators.ColdWaterBathroom.value},HotWater:{Kittchen:e.state.indicators.HotWaterKittchen.value,Bathroom:e.state.indicators.HotWaterBathroom.value},CurrentDate:{today:t,year:e.state.monthYear.year}};R.post("/indicators.json",a).then((function(t){e.setState({modalOpen:!1}),e.sendEmailHandler(),e.props.history.push("/outlay")})).catch((function(e){console.log(e)}))},e.getCurrentMonth=function(){return(new Date).getMonth()},e.getCurrentYear=function(){for(var e=(new Date).getFullYear(),t=[],a=2;a>=0;a--)t.push({key:e-a,text:e-a,value:e-a});return t},e.setStateMonth=function(t,a){var n=a.value,r=Object(L.a)({},e.state.monthYear);r.month=n,e.setState({monthYear:r})},e.setStateYear=function(t,a){var n=a.value,r=Object(L.a)({},e.state.monthYear);r.year=n,e.setState({monthYear:r})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",a=["field"],n=["field","error"];return r.a.createElement("div",{className:"ui center ui_center"},r.a.createElement(ue.a,{open:this.state.modalOpen,onClose:this.modalHandlerClose,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(fe.a,{id:"alert-dialog-title"},r.a.createElement(S.a,{variant:"h5",align:"center"},"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0437\u0430"," ",le[this.state.monthYear.month].text," ",this.state.monthYear.year," \u0433.")),r.a.createElement(he.a,{dividers:!0},r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(S.a,{variant:"h6",align:"center"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},"\u0414\u0435\u043d\u044c:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.ElectricityDay.value)),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},"\u041d\u043e\u0447\u044c:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.ElectricityNight.value))),r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(S.a,{variant:"h6",align:"center"},"\u041a\u0443\u0445\u043d\u044f")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.ColdWaterKittchen.value)),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.HotWaterKittchen.value))),r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(S.a,{variant:"h6",align:"center"},"\u0412\u0430\u043d\u043d\u0430\u044f")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.ColdWaterBathroom.value)),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.HotWaterBathroom.value))))),r.a.createElement(me.a,null,r.a.createElement(ve.a,{onClick:this.modalHandlerClose,color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ve.a,{onClick:this.sendIndicators,color:"primary",autoFocus:!0},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),r.a.createElement("form",{className:"ui form"},r.a.createElement("div",{className:"ui one column centered grid"},r.a.createElement("div",{className:"column"},r.a.createElement(S.a,{variant:"h4",align:"center"},"\u041f\u043e\u0434\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"))),r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement(S.a,{variant:"h5"},"\u041c\u0435\u0441\u044f\u0446 \u0438 \u0433\u043e\u0434"))),r.a.createElement("div",{className:"two column row"},r.a.createElement("div",{className:"column"},r.a.createElement(de.a,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u044f\u0446",selection:!0,fluid:!0,defaultValue:le[this.getCurrentMonth()].value,options:le,onChange:this.setStateMonth})),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"column"},r.a.createElement(de.a,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u044f\u0446",selection:!0,fluid:!0,defaultValue:this.getCurrentYear()[2].value,options:this.getCurrentYear(),onChange:this.setStateYear}))))),r.a.createElement("div",{className:"ui two column centered grid"},r.a.createElement("div",{className:"left floated column"},r.a.createElement(S.a,{variant:"h5"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),r.a.createElement("div",{className:"two column row"},r.a.createElement("div",{className:"column"},r.a.createElement(se,{classEnter:this.state.indicators.ElectricityDay.valid?a.join(" "):n.join(" "),id:"ElectricityDay",label:"\u0414\u0435\u043d\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u043d\u0435\u0432\u043d\u043e\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435",name:"ElectricityDay",changed:function(t){return e.addIndicatorHandler("ElectricityDay",t)},value:this.state.indicators.ElectricityDay.value,invalid:this.state.indicators.ElectricityDay.valid,errorMessage:t})),r.a.createElement("div",{className:"column"},r.a.createElement(se,{classEnter:this.state.indicators.ElectricityNight.valid?a.join(" "):n.join(" "),id:"ElectricityNight",label:"\u041d\u043e\u0447\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0447\u043d\u043e\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435",name:"ElectricityNight",changed:function(t){return e.addIndicatorHandler("ElectricityNight",t)},value:this.state.indicators.ElectricityNight.value,invalid:this.state.indicators.ElectricityNight.valid,errorMessage:t})))),r.a.createElement("div",{className:"ui two column centered grid indicator_container"},r.a.createElement("div",{className:"left floated column"},r.a.createElement(S.a,{variant:"h5"},"\u041a\u0443\u0445\u043d\u044f")),r.a.createElement("div",{className:"two column row"},r.a.createElement("div",{className:"column"},r.a.createElement(se,{classEnter:this.state.indicators.ColdWaterKittchen.valid?a.join(" "):n.join(" "),id:"ColdWaterKittchen",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435",name:"ColdWaterKittchen",changed:function(t){return e.addIndicatorHandler("ColdWaterKittchen",t)},value:this.state.indicators.ColdWaterKittchen.value,invalid:this.state.indicators.ColdWaterKittchen.valid,errorMessage:t})),r.a.createElement("div",{className:"column"},r.a.createElement(se,{classEnter:this.state.indicators.HotWaterKittchen.valid?a.join(" "):n.join(" "),id:"HotWaterKittchen",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435",name:"HotWaterKittchen",changed:function(t){return e.addIndicatorHandler("HotWaterKittchen",t)},value:this.state.indicators.HotWaterKittchen.value,invalid:this.state.indicators.HotWaterKittchen.valid,errorMessage:t})))),r.a.createElement("div",{className:"ui two column centered grid indicator_container"},r.a.createElement("div",{className:"left floated column"},r.a.createElement(S.a,{variant:"h5"},"\u0412\u0430\u043d\u043d\u0430\u044f")),r.a.createElement("div",{className:"two column row"},r.a.createElement("div",{className:"column"},r.a.createElement(se,{classEnter:this.state.indicators.ColdWaterBathroom.valid?a.join(" "):n.join(" "),id:"ColdWaterBathroom",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435",name:"ColdWaterBathroom",changed:function(t){return e.addIndicatorHandler("ColdWaterBathroom",t)},value:this.state.indicators.ColdWaterBathroom.value,invalid:this.state.indicators.ColdWaterBathroom.valid,errorMessage:t})),r.a.createElement("div",{className:"column"},r.a.createElement(se,{classEnter:this.state.indicators.HotWaterBathroom.valid?a.join(" "):n.join(" "),id:"HotWaterBathroom",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435",name:"HotWaterBathroom",changed:function(t){return e.addIndicatorHandler("HotWaterBathroom",t)},value:this.state.indicators.HotWaterBathroom.value,invalid:this.state.indicators.HotWaterBathroom.valid,errorMessage:t})))),r.a.createElement("div",{className:"ui one column centered grid"},r.a.createElement("div",{style:{textAlign:"center"},className:"column"},r.a.createElement(ve.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:this.modalHandlerOpen},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f")))))}}]),a}(n.Component),Ee=Object(u.g)(pe),ge=(a(582),a(414)),be=a(639),ye=a(640),we=a(46),Ce=a(647),Se=a(403),Oe=a.n(Se),ke=a(266),Ne=a(600),je=a(603),Ie=a(644),xe=a(409),De=a.n(xe),Te=a(407),We=a.n(Te),He=a(408),Be=a.n(He),_e=Object(E.a)({root:{margin:"20px 0",position:"relative"},cardPadding:{paddingBottom:"16px !important",paddingTop:"26px !important"},row:{display:"flex"},textField:{flexGrow:1},textFieldMargin:{marginRight:"15px",marginBottom:"15px"},selectPadding:{display:"flex",flexBasis:"13rem"},buttonClose:{position:"absolute",right:"0"},buttonEdit:{position:"absolute",right:"30px"},buttonIconSuccess:{color:"#4caf50"},buttonSuccess:{"&:hover":{backgorundColor:"rgba(243, 243, 243, 0.04) !important"}}}),Ae=function(e){var t=_e(),a=e.tariff,i=a.id,o=a.name,l=a.cost,c=a.dateEnd,s=a.dateStart,d=Object(n.useState)(e.disabled),u=Object(v.a)(d,2),m=u[0],f=u[1];return r.a.createElement(be.a,{className:t.root},m?r.a.createElement(y.a,{className:t.buttonEdit,"aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",component:"span",color:"primary",onClick:function(){return f(!1)},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(We.a,null)):r.a.createElement(y.a,{className:t.buttonEdit+" "+t.buttonSuccess,"aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){f(!0),i?e.updateItemInTariffs(i):e.insertItemToTariffs()},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(Be.a,{className:t.buttonIconSuccess})),r.a.createElement(y.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(i)},disableRipple:!0,disableFocusRipple:!0},r.a.createElement(De.a,null)),r.a.createElement(ye.a,{className:t.cardPadding},r.a.createElement(h.a,{container:!0},r.a.createElement(h.a,{item:!0,xs:12,className:t.row},r.a.createElement(ke.a,{className:t.textFieldMargin+" "+t.textField+" "+t.selectPadding},r.a.createElement(Ne.a,null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(je.a,{value:o,onChange:function(t){return e.updateTariffInState(i,"name",t.target.value)},disabled:m},r.a.createElement(Ie.a,{value:"water"},"\u041f\u043e\u0434\u0430\u0447\u0430 \u0432\u043e\u0434\u044b"),r.a.createElement(Ie.a,{value:"hot_water"},"\u041f\u043e\u0434\u043e\u0433\u0440\u0435\u0432 \u0432\u043e\u0434\u044b"),r.a.createElement(Ie.a,{value:"disposal_water"},"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435"),r.a.createElement(Ie.a,{value:"electricity_day"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u0434\u0435\u043d\u044c"),r.a.createElement(Ie.a,{value:"electricity_night"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u043d\u043e\u0447\u044c"))),r.a.createElement(Oe.a,{className:t.textField,label:"\u0422\u0430\u0440\u0438\u0444",currencySymbol:"\u20bd",value:l,minimumValue:"0",maximumValue:"5000",disabled:m,onChange:function(t,a){return e.updateTariffInState(i,"cost",a)}})),r.a.createElement(h.a,{item:!0,xs:12,className:t.row},r.a.createElement(we.a,{utils:ge.a},r.a.createElement(Ce.a,{label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d c",format:"dd.MM.yyyy",value:s,className:t.textFieldMargin+" "+t.textField,KeyboardButtonProps:{"aria-label":"change date"},disabled:m,onChange:function(t){return e.updateTariffInState(i,"dateStart",t)}}),r.a.createElement(Ce.a,{label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u043f\u043e",format:"dd.MM.yyyy",value:c,className:t.textField,KeyboardButtonProps:{"aria-label":"change date"},disabled:m,onChange:function(t){return e.updateTariffInState(i,"dateEnd",t)}}))))))},Fe=a(642);function Ye(e){return r.a.createElement(ue.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(fe.a,{id:"alert-dialog-title"},e.dialogTitle),r.a.createElement(he.a,null,r.a.createElement(Fe.a,{id:"alert-dialog-description"},e.dialogContent)),r.a.createElement(me.a,null,r.a.createElement(ve.a,{onClick:e.handleClose,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ve.a,{onClick:e.handleContinue,color:"secondary",autoFocus:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}var Ke=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={tariffs:[],deleteDialogOpen:!1,deleteTariffId:null,addButtonDisabled:!1},e.getListOfTariffs=function(){R.get("/tariffs.json").then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=Object.keys(t.data).map((function(e){var a=t.data[e];return a.id=e,a}));e.setState({tariffs:a})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.deleteItemFromTariffs=function(){R.delete("/tariffs/".concat(e.state.deleteTariffId,".json")).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteTariffId:null})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateItemInTariffs=function(t){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438",t);var a=e.state.tariffs.find((function(e){return e.id===t})),n={cost:a.cost,dateEnd:a.dateEnd,dateStart:a.dateStart,name:a.name};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",n),R.patch("/tariffs/".concat(t,".json"),n).then((function(e){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",e.data)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.insertItemToTariffs=function(){console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438");var t=e.state.tariffs[0],a={cost:t.cost,dateEnd:t.dateEnd,dateStart:t.dateStart,name:t.name};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",a),R.post("/tariffs.json",a).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({addButtonDisabled:!1})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.handleDeleteDialogOpen=function(t){"undefined"!==typeof t?e.setState({deleteDialogOpen:!0,deleteTariffId:t}):e.removeTariffFromState(t)},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeTariffFromState(e.state.deleteTariffId),e.deleteItemFromTariffs(),e.handleDeleteDialogClose()},e.addTariffToState=function(){var t=Object(P.a)(e.state.tariffs);t.unshift({cost:0,dateEnd:null,dateStart:null,name:""}),e.setState({tariffs:t,addButtonDisabled:!0})},e.removeTariffFromState=function(t){var a=Object(P.a)(e.state.tariffs);a=a.filter((function(e){return e.id!==t})),e.state.addButtonDisabled?e.setState({tariffs:a,addButtonDisabled:!1}):e.setState({tariffs:a})},e.updateTariffInState=function(t,a,n){var r=Object(P.a)(e.state.tariffs),i=r.findIndex((function(e){return e.id===t}));r[i][a]=n,e.setState({tariffs:r})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getListOfTariffs()}},{key:"render",value:function(){var e=this,t=null;return t=0===this.state.tariffs.length?r.a.createElement(V.a,null):this.state.tariffs.map((function(t,a){return r.a.createElement(Ae,{key:"undefined"!==typeof t.id?t.id:a,tariff:t,disabled:"undefined"!==typeof t.id,handleDeleteDialogOpen:e.handleDeleteDialogOpen,handleDeleteDialogContinue:e.handleDeleteDialogContinue,updateItemInTariffs:e.updateItemInTariffs,updateTariffInState:e.updateTariffInState,insertItemToTariffs:e.insertItemToTariffs})})),r.a.createElement("div",{className:"tariffContainer"},r.a.createElement(Ye,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.","\u0451":!0}),r.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u0422\u0430\u0440\u0438\u0444\u044b"),r.a.createElement(ve.a,{onClick:function(){return e.addTariffToState(t)},color:"primary",disabled:this.state.addButtonDisabled},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444"),t)}}]),a}(n.Component),Me=a(203),Le=(a(585),a(412)),Pe=a.n(Le),Ue=a(645),Re=a(378),Ve=Object(E.a)((function(e){return Object(Re.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),Ge=function(e){var t=Ve();return r.a.createElement(Ue.a,Object.assign({className:t.root,variant:"outlined",inputProps:{className:t.input}},e))},ze=a(643),Je=a(410),Xe=a.n(Je),$e=a(411),Qe=a.n($e),Ze=Object(E.a)((function(e){return Object(Re.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),qe=function(e){var t=Ze(),a=r.a.useState({showPassword:!1}),n=Object(v.a)(a,2),i=n[0],o=n[1];return r.a.createElement(Ue.a,Object.assign({className:t.root,variant:"outlined",type:i.showPassword?"text":"password",inputProps:{className:t.input},InputProps:{endAdornment:r.a.createElement(ze.a,{position:"end"},r.a.createElement(y.a,{"aria-label":"toggle password visibility",onClick:function(){o(Object(L.a)(Object(L.a)({},i),{},{showPassword:!i.showPassword}))},edge:"end"},i.showPassword?r.a.createElement(Xe.a,null):r.a.createElement(Qe.a,null)))}},e))},et=a(4),tt=Object(et.a)({root:{width:"100%",textTransform:"none",margin:"30px 0 10px 0"}})(ve.a),at=function(e){return r.a.createElement(tt,Object.assign({variant:"contained",color:"primary"},e),e.children)},nt=a(648),rt=Object(et.a)({root:{marginBottom:"10px"}})(nt.a),it=function(e){return r.a.createElement(rt,e,e.children)},ot=function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}},lt=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},ct=function(e){return function(t){setTimeout((function(){t(lt())}),1e3*e)}},st=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",rememberMe:!1,validateFields:{email:!1,password:!1},fieldValidationErrors:{email:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!",password:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"},willSend:!0},e.inputHandler=function(t){var a=t.target.name,n=t.target.value;e.validation(a,n),e.setState(Object(Me.a)({},a,n))},e.validation=function(t,a){var n=Object(L.a)({},e.state.validateFields),r=Object(L.a)({},e.state.fieldValidationErrors);switch(t){case"email":n.email=/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(a),0===a.length?r.email="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!":r.email="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0447\u0442\u044b";break;case"password":n.password=a.length>=6,0===a.length?r.password="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!":r.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}e.setState({validateFields:n,fieldValidationErrors:r})},e.checkboxHandler=function(){var t=e.state.rememberMe;e.setState({rememberMe:!t})},e.formSenderHandler=function(){e.state.validateFields.email&&e.state.validateFields.password?(e.setState({willSend:!0}),e.props.onAuth(e.state.email,e.state.password,e.state.rememberMe)):e.setState({willSend:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=!1,t=!1;return this.state.willSend||(e=!this.state.validateFields.email,t=!this.state.validateFields.password),r.a.createElement("div",{className:"auth_container"},r.a.createElement("form",null,r.a.createElement("div",{className:"lockIconContainer"},r.a.createElement("div",{className:"roundIcon"},r.a.createElement(Pe.a,null))),r.a.createElement("h1",{className:"authHeader"},"\u0412\u0445\u043e\u0434 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),this.props.errorMessage?r.a.createElement(it,{severity:"error"},this.props.errorMessage):null,r.a.createElement(Ge,{key:"email",id:"email",label:"\u041f\u043e\u0447\u0442\u0430",name:"email",error:e,helperText:e?this.state.fieldValidationErrors.email:null,onChange:this.inputHandler,value:this.state.email}),r.a.createElement(qe,{key:"password",id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",error:t,helperText:t?this.state.fieldValidationErrors.password:null,onChange:this.inputHandler,value:this.state.password}),r.a.createElement(at,{onClick:this.formSenderHandler},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))}}]),a}(n.Component),dt=Object(m.b)((function(e){return{isAuth:null!==e.token,loading:e.loading,errorMessage:e.error}}),(function(e){return{onAuth:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"});var n={email:e,password:t,returnSecureToken:!0},r="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(oe.AUTH_API_KEY);R.post(r,n).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),a(ot(e.data.idToken,e.data.localId)),a(ct(e.data.expiresIn))})).catch((function(e){console.log(e),a(function(e){return{type:"AUTH_FAIL",error:e}}(e.response.data.error))}))}}(t,a))}}}))(st),ut=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onLogout(this.props.history)}},{key:"render",value:function(){return r.a.createElement(u.a,{to:"/"})}}]),a}(n.Component),mt=Object(m.b)(null,(function(e){return{onLogout:function(){return e(lt())}}}))(ut),ht=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var e=r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/auth",component:dt}),r.a.createElement(u.a,{to:"/auth"}));return this.props.isAuth&&(e=r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/outlay",component:ne}),r.a.createElement(u.b,{path:"/send-indicators",component:Ee}),r.a.createElement(u.b,{path:"/tariffs",component:Ke}),r.a.createElement(u.b,{path:"/logout",component:mt}),r.a.createElement(u.a,{to:"/send-indicators"}))),r.a.createElement(M,{isAuth:this.props.isAuth},e)}}]),a}(n.Component),ft=Object(m.b)((function(e){return{isAuth:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(lt());else{var n=localStorage.getItem("userId");e(ot(t,n)),e(ct((a.getTime()-(new Date).getTime())/1e3))}}else e(lt())}))}}}))(ht);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=a(132),pt=a(413),Et=a(59),gt=Object(Et.a)(),bt=function(e,t){return Object(L.a)(Object(L.a)({},e),t)},yt={token:null,userId:null,error:null,loading:!1},wt=function(e){return bt(e,{error:null,loading:!0})},Ct=function(e,t){return bt(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},St=function(e,t){var a;return a=401===t.error?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",bt(e,{error:a,loading:!1})},Ot=function(e){return bt(e,{token:null,userId:null})},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return wt(e);case"AUTH_SUCCESS":return Ct(e,t);case"AUTH_FAIL":return St(e,t);case"AUTH_LOGOUT":return Ot(e);default:return e}},Nt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||vt.c,jt=Object(vt.d)(kt,Nt(Object(vt.a)(pt.a))),It=r.a.createElement(m.a,{store:jt},r.a.createElement(p.a,{history:gt,basename:"/"},r.a.createElement(ft,null)));o.a.render(It,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},97:function(e){e.exports=JSON.parse('{"SERVICE_ID":"gmail","RECIPIENT":"anny11533@gmail.com","ADDRESS":"\u0443\u043b. \u041c\u0430\u043a\u0430\u0440\u0435\u043d\u043a\u043e, 6 - \u043a\u0432. 88","TEMPLATE_ID":"template_83dCi3ca","USER_ID":"user_rEIgP6Z8hPXkwIosFYkR7","AUTH_API_KEY":"AIzaSyCQ-YIBbLpl1SOF7KzaSR0v7HLz61N-yno"}')}},[[433,1,2]]]);
//# sourceMappingURL=main.377bf306.chunk.js.map