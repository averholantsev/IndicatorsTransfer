(this.webpackJsonpindicators_transfer=this.webpackJsonpindicators_transfer||[]).push([[0],{295:function(e,t,a){e.exports=a(333)},300:function(e,t,a){},306:function(e,t,a){},328:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(12),l=a.n(i),o=(a(300),a(301),a(28)),c=a(29),s=a(31),d=a(30),u=a(25),m=a(34),h=(a(306),a(365)),v=a(86),p=a(58),g=a(45),f=a(197),b=a(359),E=a(360),y=a(361),I=a(336),D=a(270),O=a.n(D),S=a(68),j=a(269),k=a.n(j),x=a(56),C=a(337),W=a(338),w=a(363),M=a(364),T=a(265),N=a.n(T),V=a(266),U=a.n(V),F=a(267),_=a.n(F),A=a(268),H=a.n(A),B=[{name:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f",path:"/send-indicators",icon:n.a.createElement(N.a,null)},{name:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b",path:"/outlay",icon:n.a.createElement(U.a,null)},{name:"\u0422\u0430\u0440\u0438\u0444\u044b",path:"/tariffs",icon:n.a.createElement(_.a,null)},{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",path:"/profile",icon:n.a.createElement(H.a,null)}],P=Object(f.a)((function(e){return{root:{flexGrow:1,width:"100%"},button:{"&:hover":{color:"white"}},grow:{flexGrow:1},list:{width:250}}})),Y=function(e){var t=P(),a="\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f";switch(window.location.hash){case"#/send-indicators":a="\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f";break;case"#/outlay":a="\u0420\u0430\u0441\u0445\u043e\u0434\u044b";break;case"#/tariffs":a="\u0422\u0430\u0440\u0438\u0444\u044b";break;case"#/profile":a="\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}var i=Object(r.useState)(a),l=Object(p.a)(i,2),o=l[0],c=l[1],s=Object(r.useState)(!1),d=Object(p.a)(s,2),u=d[0],m=d[1],h=Object(b.a)("(min-width:425px)");return n.a.createElement("div",{className:t.root},n.a.createElement(E.a,{position:"relative"},n.a.createElement(y.a,null,n.a.createElement(I.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return m(!0)}},n.a.createElement(k.a,null)),n.a.createElement(S.a,{variant:"h6"},o),n.a.createElement("div",{className:t.grow}),e.userDetails&&h?n.a.createElement(S.a,{variant:"h6"},e.userDetails.firstName+" "+e.userDetails.lastName):null,n.a.createElement(I.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:g.b,to:"/logout"},n.a.createElement(O.a,null))),n.a.createElement(x.a,{className:t.drawer,anchor:"left",open:u,onClose:function(){return m(!1)}},n.a.createElement(C.a,{className:t.list},B.map((function(e){return n.a.createElement(W.a,{button:!0,key:e.name,component:g.b,to:e.path,onClick:function(){m(!1),c(e.name)}},n.a.createElement(w.a,null,e.icon),n.a.createElement(M.a,{primary:e.name}))}))))))},L=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(h.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"center"},this.props.isAuth&&n.a.createElement(h.a,{item:!0,xs:12,style:{width:"100%"}},n.a.createElement(Y,{userDetails:this.props.userDetails})),n.a.createElement(h.a,{item:!0,xs:12,style:{width:"100%"}},n.a.createElement(v.a,{className:"paper"},this.props.children)))}}]),a}(r.Component),K=Object(m.b)((function(e){return{userDetails:e.userDetails}}))(L),R=a(41),q=a(6),z=a(271),G=a.n(z).a.create({baseURL:"https://reacttestproject-70f65.firebaseio.com/"}),X=a(158),J=a.n(X),$=(a(328),a(59)),Q=[{text:"\u042f\u043d\u0432\u0430\u0440\u044c",value:0},{text:"\u0424\u0435\u0432\u0430\u0440\u043b\u044c",value:1},{text:"\u041c\u0430\u0440\u0442",value:2},{text:"\u0410\u043f\u0440\u0435\u043b\u044c",value:3},{text:"\u041c\u0430\u0439",value:4},{text:"\u0418\u044e\u043d\u044c",value:5},{text:"\u0418\u044e\u043b\u044c",value:6},{text:"\u0410\u0432\u0433\u0443\u0441\u0442",value:7},{text:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",value:8},{text:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",value:9},{text:"\u041d\u043e\u044f\u0431\u0440\u044c",value:10},{text:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",value:11}],Z=function(e,t){var a={isValid:!0,errorMessage:null};if(!t)return!0;if(t.required&&(a.isValid=""!==e.trim()&&a.isValid,a.errorMessage=a.isValid?"":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),t.isEmail){a.isValid=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&a.isValid,a.errorMessage=""===e?"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}return t.isDate&&(a.isValid=null!==e&&a.isValid,a.errorMessage=a.isValid?"":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),t.isNumber&&(a.isValid=0!==e&&a.isValid,a.errorMessage=a.isValid?"":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),t.isPassord&&(a.isValid=e.length>=6&&a.isValid,e.length<6&&e.length>0?a.errorMessage="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":0===e.length?a.errorMessage="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f":a.errorMessage=""),a},ee=a(366),te=a(367),ae=a(368);function re(e){return n.a.createElement(ee.a,{row:!0},n.a.createElement(te.a,{control:n.a.createElement(ae.a,{checked:e.checked,onChange:e.switchChange,name:e.label,color:"primary"}),label:e.label}))}var ne=a(369),ie=a(370),le=a(371),oe=a(372),ce=a(373),se=function(e){return n.a.createElement(ne.a,{open:e.modalOpen,onClose:e.modalHandlerClose,maxWidth:"xs"},n.a.createElement(ie.a,{align:"center"},"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0437\u0430 ",Q[e.monthYear.month].text," ",e.monthYear.year," \u0433."),n.a.createElement(le.a,{dividers:!0},n.a.createElement(h.a,{container:!0,spacing:1},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h6",align:"center"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0414\u0435\u043d\u044c:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},e.indicators.electricityDay.value)),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u041d\u043e\u0447\u044c:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},e.indicators.electricityNight.value)),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h6",align:"center"},"\u041a\u0443\u0445\u043d\u044f")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},e.indicators.coldWaterKitchen.value)),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},e.indicators.hotWaterKitchen.value)),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h6",align:"center"},"\u0412\u0430\u043d\u043d\u0430\u044f")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},e.indicators.coldWaterBathroom.value)),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},e.indicators.hotWaterBathroom.value)),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(re,{label:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u044e",checked:e.sendDataToAccountant,switchChange:e.switchChange})))),n.a.createElement(oe.a,null,n.a.createElement(ce.a,{onClick:e.modalHandlerClose,color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),n.a.createElement(ce.a,{onClick:e.sendIndicators,color:"primary",autoFocus:!0},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},de=a(374),ue=a(375),me=Object(f.a)({root:{margin:"20px 0"},cardPadding:{padding:"16px !important"}}),he=function(e){var t=me();return n.a.createElement(de.a,{className:t.root},n.a.createElement(ue.a,{className:t.cardPadding},e.children))},ve=a(24),pe=a.n(ve),ge=a(199),fe=a(347),be=a(354),Ee=a(382),ye=function(e){var t=e.indicators,a=t.electricityDay,r=t.electricityNight,i=t.coldWaterKitchen,l=t.coldWaterBathroom,o=t.hotWaterKitchen,c=t.hotWaterBathroom;return n.a.createElement(h.a,{container:!0,spacing:2},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u041c\u0435\u0441\u044f\u0446 \u0438 \u0433\u043e\u0434")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(ge.a,{style:{width:"100%"}},n.a.createElement(fe.a,null,"\u041c\u0435\u0441\u044f\u0446"),n.a.createElement(be.a,{value:e.monthYear.month||0,onChange:function(t){return e.setStateMonthYear("month",t.target.value)}},Q.map((function(e){return n.a.createElement(Ee.a,{key:e.value,value:e.value},e.text)}))))),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(ge.a,{style:{width:"100%"}},n.a.createElement(fe.a,null,"\u0413\u043e\u0434"),n.a.createElement(be.a,{value:e.monthYear.year||2020,onChange:function(t){return e.setStateMonthYear("year",t.target.value)}},e.getCurrentYear().map((function(e){return n.a.createElement(Ee.a,{key:e.value,value:e.value},e.text)}))))),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{style:{width:"100%"},variant:"standard",label:"\u0414\u0435\u043d\u044c",currencySymbol:"",value:a.value,minimumValue:"0",onChange:function(t,a){return e.updateIndicatorsInState("electricityDay",a)},error:!a.valid&&a.touched,helperText:!a.valid&&a.touched?a.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{style:{width:"100%"},variant:"standard",label:"\u041d\u043e\u0447\u044c",currencySymbol:"",value:r.value,minimumValue:"0",onChange:function(t,a){return e.updateIndicatorsInState("electricityNight",a)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u041a\u0443\u0445\u043d\u044f")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{style:{width:"100%"},variant:"standard",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:i.value,minimumValue:"0",onChange:function(t,a){return e.updateIndicatorsInState("coldWaterKitchen",a)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{style:{width:"100%"},variant:"standard",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:o.value,minimumValue:"0",onChange:function(t,a){return e.updateIndicatorsInState("hotWaterKitchen",a)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u0412\u0430\u043d\u043d\u0430\u044f")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{style:{width:"100%"},variant:"standard",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:l.value,minimumValue:"0",onChange:function(t,a){return e.updateIndicatorsInState("coldWaterBathroom",a)},error:!l.valid&&l.touched,helperText:!l.valid&&l.touched?l.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{style:{width:"100%"},variant:"standard",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:c.value,minimumValue:"0",onChange:function(t,a){return e.updateIndicatorsInState("hotWaterBathroom",a)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12,style:{textAlign:"center",marginTop:"15px"}},n.a.createElement(ce.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:e.indicatorsValid?e.modalHandlerOpen:function(){return e.checkFormValidity()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},Ie=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={indicators:{electricityDay:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},electricityNight:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},coldWaterKitchen:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},coldWaterBathroom:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},hotWaterKitchen:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},hotWaterBathroom:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1}},indicatorsValid:!1,monthYear:{month:(new Date).getMonth(),year:(new Date).getFullYear()},sendDataToAccountant:!0,modalOpen:!1},e.updateIndicatorsInState=function(t,a){var r=Z(a,e.state.indicators[t].validation),n=Object(q.a)(Object(q.a)({},e.state.indicators),{},Object(R.a)({},t,Object(q.a)(Object(q.a)({},e.state.indicators[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity(n);e.setState({indicators:n,indicatorsValid:i})},e.checkFormValidity=function(t){if(console.log(typeof t),"undefined"!==typeof t){var a=t.electricityDay,r=t.electricityNight,n=t.coldWaterKitchen,i=t.coldWaterBathroom,l=t.hotWaterKitchen,o=t.hotWaterBathroom;if(a.valid&&r.valid&&n.valid&&i.valid&&l.valid&&o.valid)return!0}if("undefined"===typeof t){var c=Object(q.a)(Object(q.a)({},e.state.indicators),{},{electricityDay:Object(q.a)(Object(q.a)({},e.state.indicators.electricityDay),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),electricityNight:Object(q.a)(Object(q.a)({},e.state.indicators.electricityNight),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),coldWaterKitchen:Object(q.a)(Object(q.a)({},e.state.indicators.coldWaterKitchen),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),coldWaterBathroom:Object(q.a)(Object(q.a)({},e.state.indicators.coldWaterBathroom),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),hotWaterKitchen:Object(q.a)(Object(q.a)({},e.state.indicators.hotWaterKitchen),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),hotWaterBathroom:Object(q.a)(Object(q.a)({},e.state.indicators.hotWaterBathroom),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})});e.setState({indicators:c})}return!1},e.modalHandlerClose=function(){e.setState({modalOpen:!1})},e.modalHandlerOpen=function(t){for(var a in t.preventDefault(),e.state.indicators){var r=Object(q.a)({},e.state.indicators);if(""===r[a].value||0===r[a].value){var n=Object(q.a)({},e.state.indicators);n[a].valid=!1,e.setState({indicators:n}),e.setState({indicatorsValid:!1})}}e.state.indicators.electricityDay.valid&&e.state.indicators.electricityNight.valid&&e.state.indicators.coldWaterKitchen.valid&&e.state.indicators.coldWaterBathroom.valid&&e.state.indicators.hotWaterKitchen.valid&&e.state.indicators.hotWaterBathroom.valid&&e.setState({modalOpen:!0})},e.sendEmailHandler=function(){var t={recipient:e.props.userDetails.accountantEmail,address:e.props.userDetails.address,month:Q[e.state.monthYear.month].text,year:e.state.monthYear.year,electricityDay:e.state.indicators.electricityDay.value,electricityNight:e.state.indicators.electricityNight.value,coldWaterKitchen:e.state.indicators.coldWaterKitchen.value,coldWaterBathroom:e.state.indicators.coldWaterBathroom.value,hotWaterKitchen:e.state.indicators.hotWaterKitchen.value,hotWaterBathroom:e.state.indicators.hotWaterBathroom.value};console.log(t),J.a.send($.SERVICE_ID,$.TEMPLATE_ID,t,$.USER_ID).then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)}))},e.sendIndicators=function(){var t=new Date(Date.UTC(e.state.monthYear.year,e.state.monthYear.month,1,5)).setUTCHours(0,0,0,0),a={electricity:{day:e.state.indicators.electricityDay.value,night:e.state.indicators.electricityNight.value},coldWater:{kitchen:e.state.indicators.coldWaterKitchen.value,bathroom:e.state.indicators.coldWaterBathroom.value},hotWater:{kitchen:e.state.indicators.hotWaterKitchen.value,bathroom:e.state.indicators.hotWaterBathroom.value},currentDate:{today:new Date(t).toUTCString(),year:e.state.monthYear.year},userId:localStorage.getItem("userId")},r=localStorage.getItem("token");G.post("/indicators.json?auth=".concat(r),a).then((function(t){console.log(t),e.setState({modalOpen:!1}),e.state.sendDataToAccountant&&e.sendEmailHandler(),e.props.history.push("/outlay")})).catch((function(e){console.log(e)}))},e.getCurrentMonth=function(){return(new Date).getMonth()},e.getCurrentYear=function(){for(var e=(new Date).getFullYear(),t=[],a=2;a>=0;a--)t.push({text:e-a,value:e-a});return t},e.setStateMonthYear=function(t,a){var r=Object(q.a)(Object(q.a)({},e.state.monthYear),{},Object(R.a)({},t,a));e.setState({monthYear:r})},e.switchChange=function(){e.setState({sendDataToAccountant:!e.state.sendDataToAccountant})},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(se,{indicators:this.state.indicators,monthYear:this.state.monthYear,modalOpen:this.state.modalOpen,sendDataToAccountant:this.state.sendDataToAccountant,switchChange:this.switchChange,modalHandlerClose:this.modalHandlerClose,sendIndicators:this.sendIndicators}),n.a.createElement(S.a,{variant:"h4",align:"center"},"\u041f\u043e\u0434\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),n.a.createElement(he,null,n.a.createElement(ye,{indicators:this.state.indicators,monthYear:this.state.monthYear,indicatorsValid:this.state.indicatorsValid,setStateMonthYear:this.setStateMonthYear,getCurrentYear:this.getCurrentYear,updateIndicatorsInState:this.updateIndicatorsInState,modalHandlerOpen:this.modalHandlerOpen,checkFormValidity:this.checkFormValidity})))}}]),a}(r.Component),De=Object(u.g)(Object(m.b)((function(e){return{userDetails:e.userDetails}}))(Ie)),Oe=a(85),Se=(a(331),a(378)),je=Object(f.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"15px"},paragraph:{marginTop:"5px"}}})),ke=function(){var e=je();return n.a.createElement("div",{className:e.root},n.a.createElement(Se.a,null),n.a.createElement(S.a,{className:e.paragraph},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"))},xe=a(387),Ce=a(388),We=a(389),we=a(390),Me=a(391),Te=a(392),Ne=a(162),Ve=a.n(Ne),Ue=a(275),Fe=a.n(Ue),_e=Object(f.a)({root:{position:"relative",marginTop:"30px"},buttonClose:{position:"absolute",right:"5px",top:"5px",padding:0},buttonSend:{position:"absolute",left:"5px",top:"5px",padding:0}}),Ae=function(e){var t=_e(),a=e.indicatorsList,r=a.id,i=a.date,l=a.indicators,o=e.costWaterSupply,c=e.costElectricity,s="";switch(i.getMonth()){case 0:s="\u042f\u043d\u0432\u0430\u0440\u044c";break;case 1:s="\u0424\u0435\u0432\u0440\u0430\u043b\u044c";break;case 2:s="\u041c\u0430\u0440\u0442";break;case 3:s="\u0410\u043f\u0440\u0435\u043b\u044c";break;case 4:s="\u041c\u0430\u0439";break;case 5:s="\u0418\u044e\u043d\u044c";break;case 6:s="\u0418\u044e\u043b\u044c";break;case 7:s="\u0410\u0432\u0433\u0443\u0441\u0442";break;case 8:s="\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c";break;case 9:s="\u041e\u043a\u0442\u044f\u0431\u0440\u044c";break;case 10:s="\u041d\u043e\u044f\u0431\u0440\u044c";break;case 11:s="\u0414\u0435\u043a\u0430\u0431\u0440\u044c";break;default:s="\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"}return n.a.createElement(we.a,{component:v.a,className:t.root},n.a.createElement(I.a,{className:t.buttonSend,"aria-label":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",component:"span",color:"primary",onClick:function(){e.handleSendDialogOpen(r)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Fe.a,null)),n.a.createElement(I.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(r)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Ve.a,null)),n.a.createElement(S.a,{variant:"h6",align:"center"},s," ",i.getFullYear()),n.a.createElement(xe.a,null,n.a.createElement(Me.a,null,n.a.createElement(Te.a,null,n.a.createElement(We.a,null,n.a.createElement("b",null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c")),n.a.createElement(We.a,{align:"center"},n.a.createElement("b",null,"\u0420\u0430\u0441\u0445\u043e\u0434")),n.a.createElement(We.a,{align:"center"},n.a.createElement("b",null,"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435")))),n.a.createElement(Ce.a,null,l.map((function(e,t){return n.a.createElement(Te.a,{key:t},n.a.createElement(We.a,{component:"th",scope:"row"},e.name),n.a.createElement(We.a,{align:"center"},e.intake),n.a.createElement(We.a,{align:"center"},e.outlay))})),n.a.createElement(Te.a,null,n.a.createElement(We.a,{align:"center",colSpan:3},n.a.createElement("b",null,"\u0420\u0430\u0441\u0447\u0435\u0442 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438"))),n.a.createElement(Te.a,null,n.a.createElement(We.a,{component:"th",scope:"row",colSpan:2},"\u0412\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435"),n.a.createElement(We.a,{align:"center"},o," \u20bd")),n.a.createElement(Te.a,null,n.a.createElement(We.a,{component:"th",scope:"row",colSpan:2},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f"),n.a.createElement(We.a,{align:"center"},c," \u20bd")))))},He=a(397),Be=a(386),Pe=Object(f.a)({root:{flexGrow:1,marginTop:"15px",boxShadow:"none"},label:{fontSize:"1rem"}}),Ye=function(e){var t=Pe(),a=n.a.useState(0),r=Object(p.a)(a,2),i=r[0],l=r[1];return n.a.createElement(v.a,{className:t.root},n.a.createElement(He.a,{value:i,onChange:function(t,a){l(a),e.changeCurrentYear(e.tabsList[a])},indicatorColor:"primary",textColor:"primary",centered:!0},e.tabsList.map((function(e){return n.a.createElement(Be.a,{key:e,label:e,className:t.label})}))))},Le=a(379);function Ke(e){return n.a.createElement(ne.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(ie.a,{id:"alert-dialog-title"},e.dialogTitle),n.a.createElement(le.a,null,n.a.createElement(Le.a,{id:"alert-dialog-description"},e.dialogContent)),n.a.createElement(oe.a,null,n.a.createElement(ce.a,{onClick:e.handleClose,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),n.a.createElement(ce.a,{onClick:e.handleContinue,color:"secondary",autoFocus:!0},e.activeButtonName)))}var Re=a(78),qe=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={indicatorsList:null,prevIndicators:null,tariffs:null,currentYear:(new Date).getUTCFullYear(),error:null,deleteDialogOpen:!1,deleteIndicatorId:null,sendDialogOpen:!1,sendIndicatorId:null},e.getDataFromFirebase=function(){var t=localStorage.getItem("token"),a=localStorage.getItem("userId"),r="/users.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),n="/tariffs.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),i="/indicators.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),l=G.get(r),o=G.get(n),c=G.get(i);Promise.all([l,o,c]).then((function(t){console.log("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b | \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445: ",t);var a=e.getUserDetails(t[0].data),r=e.getListOfTariffs(t[1].data),n=e.getListOfIndicators(t[2].data);0!==(n=e.countOutlay(n,a)).length?e.setState({prevIndicators:a,tariffs:r,indicatorsList:n}):e.setState({prevIndicators:a,tariffs:r,error:"\u041f\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})}))},e.getUserDetails=function(e){var t=e[Object.keys(e)].prevIndicators;return[{id:"day_electricity",name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:t.electricity.day},{id:"night_electricity",name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:t.electricity.night},{id:"cold_water",name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:t.bathroom.coldWater+t.kitchen.coldWater},{id:"hot_water",name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:t.bathroom.hotWater+t.kitchen.hotWater},{id:"disposal_water",name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:t.bathroom.coldWater+t.kitchen.coldWater+t.bathroom.hotWater+t.kitchen.hotWater}]},e.getListOfTariffs=function(e){return Object.keys(e).map((function(t){var a=e[t];return a.id=t,a}))},e.getListOfIndicators=function(e){var t=Object.keys(e).map((function(t){return{id:t,date:new Date(e[t].currentDate.today),year:e[t].currentDate.year,indicators:[{id:"day_electricity",name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:e[t].electricity.day},{id:"night_electricity",name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:e[t].electricity.night},{id:"cold_water",name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:e[t].coldWater.bathroom+e[t].coldWater.kitchen,bathroom:e[t].coldWater.bathroom,kitchen:e[t].coldWater.kitchen},{id:"hot_water",name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:e[t].hotWater.bathroom+e[t].hotWater.kitchen,bathroom:e[t].hotWater.bathroom,kitchen:e[t].hotWater.kitchen},{id:"disposal_water",name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:e[t].coldWater.bathroom+e[t].coldWater.kitchen+e[t].hotWater.bathroom+e[t].hotWater.kitchen}]}}));return t.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),t},e.sendEmailHandler=function(){var t=e.getOneIndicator(),a={recipient:e.props.userDetails.accountantEmail,address:e.props.userDetails.address,month:Q[new Date(t.date).getMonth()].text,year:t.year,electricityDay:t.indicators[0].intake,electricityNight:t.indicators[1].intake,coldWaterKitchen:t.indicators[2].kitchen,coldWaterBathroom:t.indicators[2].bathroom,hotWaterKitchen:t.indicators[3].kitchen,hotWaterBathroom:t.indicators[3].bathroom};J.a.send($.SERVICE_ID,$.TEMPLATE_ID,a,$.USER_ID).then((function(t){console.log("SUCCESS!",t.status,t.text),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u043d\u0430 \u043f\u043e\u0447\u0442\u0443!",{variant:"success",preventDuplicate:!0})}),(function(e){console.log("FAILED...",e)}))},e.getOneIndicator=function(){return e.state.indicatorsList.find((function(t){return t.id===e.state.sendIndicatorId}))},e.deleteItemFromIndicators=function(){var t=localStorage.getItem("token");G.delete("/indicators/".concat(e.state.deleteIndicatorId,".json?auth=").concat(t)).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteIndicatorId:null}),e.props.enqueueSnackbar("\u041e\u0431\u044a\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!",{variant:"info",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.removeIndicatorFromState=function(t){var a=Object(Oe.a)(e.state.indicatorsList);a=a.filter((function(e){return e.id!==t})),e.setState({indicatorsList:a})},e.handleDeleteDialogOpen=function(t){e.setState({deleteDialogOpen:!0,deleteIndicatorId:t})},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeIndicatorFromState(e.state.deleteIndicatorId),e.deleteItemFromIndicators(),e.handleDeleteDialogClose()},e.handleSendDialogOpen=function(t){e.setState({sendDialogOpen:!0,sendIndicatorId:t})},e.handleSendDialogClose=function(){e.setState({sendDialogOpen:!1})},e.handleSendDialogContinue=function(){e.sendEmailHandler(),e.handleSendDialogClose()},e.countOutlay=function(e,t){for(var a=Object(Oe.a)(e),r=function(e){a[e]===a[0]?a[e].indicators=a[e].indicators.map((function(e,a){var r=Object(q.a)({},e);return r.outlay=r.intake-t[a].intake,r})):a[e].indicators=a[e].indicators.map((function(t,r){var n=Object(q.a)({},t);return n.outlay=n.intake-a[e-1].indicators[r].intake,n}))},n=0;n<a.length;n++)r(n);return a},e.countCostElectricity=function(t,a){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=null;try{n=t.find((function(e){return"day_electricity"===e.id})).outlay}catch(c){console.log("\u042d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u043d\u044c",c)}var i=null;try{i=t.find((function(e){return"night_electricity"===e.id})).outlay}catch(c){console.log("\u042d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u0447\u044c",c)}var l=null;try{l=e.state.tariffs.find((function(e){var t=e.name,a=e.dateStart,n=e.dateEnd;return"electricity_day"===t&&r.setDate(r.getDate()+1)>=new Date(a)&&r.setDate(r.getDate()+1)<=new Date(n)})).cost}catch(c){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u043d\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}var o=null;try{o=e.state.tariffs.find((function(e){var t=e.name,a=e.dateStart,n=e.dateEnd;return"electricity_night"===t&&r.setDate(r.getDate()+1)>=new Date(a)&&r.setDate(r.getDate()+1)<=new Date(n)})).cost}catch(c){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u0447\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}return(n*l+i*o).toFixed(2)},e.countCostWaterSupply=function(t,a){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=null;try{n=t.find((function(e){return"cold_water"===e.id})).outlay}catch(s){console.log("\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",s)}var i=null;try{i=t.find((function(e){return"hot_water"===e.id})).outlay}catch(s){console.log("\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",s)}var l=null;try{l=t.find((function(e){return"disposal_water"===e.id})).outlay}catch(s){console.log("\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435",s)}var o=null;try{o=e.state.tariffs.find((function(e){var t=e.name,a=e.dateStart,n=e.dateEnd;return"water"===t&&r.setDate(r.getDate()+1)>=new Date(a)&&r.setDate(r.getDate()+1)<=new Date(n)})).cost}catch(s){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u0443 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}var c=null;try{c=e.state.tariffs.find((function(e){var t=e.name,a=e.dateStart,n=e.dateEnd;return"disposal_water"===t&&r.setDate(r.getDate()+1)>=new Date(a)&&r.setDate(r.getDate()+1)<=new Date(n)})).cost}catch(s){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}return((n+i)*o+l*c).toFixed(2)},e.changeCurrentYear=function(t){e.setState({currentYear:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getDataFromFirebase()}},{key:"render",value:function(){var e=this,t=null;t=null===this.state.indicatorsList&&null===this.state.error?n.a.createElement(ke,null):null!==this.state.indicatorsList?(t=this.state.indicatorsList.filter((function(t){return t.date.getUTCFullYear()===e.state.currentYear}))).length>0?t.map((function(t,a){return n.a.createElement(Ae,{key:a,indicatorsList:t,costWaterSupply:e.countCostWaterSupply(t.indicators,t.date),costElectricity:e.countCostElectricity(t.indicators,t.date),handleDeleteDialogOpen:e.handleDeleteDialogOpen,handleSendDialogOpen:e.handleSendDialogOpen})})):n.a.createElement("p",{style:{textAlign:"center"}},"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 ".concat(this.state.currentYear," \u0433\u043e\u0434")):n.a.createElement("p",{style:{textAlign:"center"}},this.state.error);for(var a=[],r=(new Date).getUTCFullYear();r>=(new Date).getUTCFullYear()-1;r--)a.push(r);return n.a.createElement("div",null,n.a.createElement(Ke,{open:this.state.sendDialogOpen,handleClose:this.handleSendDialogClose,handleContinue:this.handleSendDialogContinue,dialogTitle:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u0438?",activeButtonName:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),n.a.createElement(Ke,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.",activeButtonName:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),n.a.createElement(S.a,{variant:"h4",align:"center"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"),n.a.createElement(Ye,{tabsList:a,changeCurrentYear:this.changeCurrentYear}),n.a.createElement("div",{className:"indicatorsList"},t))}}]),a}(r.Component),ze=Object(Re.b)(Object(m.b)((function(e){return{userDetails:e.userDetails}}))(qe)),Ge=a(103),Xe=a(35),Je=a(395),$e=a(345),Qe=a(276),Ze=a.n(Qe),et=a(277),tt=a.n(et),at=Object(f.a)({root:{margin:"20px 0",position:"relative"},cardPadding:{paddingBottom:"16px !important",paddingTop:"26px !important"},row:{display:"flex"},textField:{width:"100%"},selectPadding:{display:"flex",flexBasis:"13rem"},buttonClose:{position:"absolute",padding:"5px",top:"5px",right:"5px"},buttonEdit:{position:"absolute",padding:"5px",top:"5px",right:"35px"},buttonIconSuccess:{color:"#4caf50"},buttonIconSuccessDisabled:{color:"#9E9E9E"},buttonSuccess:{"&:hover":{backgorundColor:"rgba(243, 243, 243, 0.04) !important"}}}),rt=function(e){var t=at(),a=e.tariff,i=a.id,l=a.name,o=a.cost,c=a.dateEnd,s=a.dateStart,d=a.tariffValid,u=Object(r.useState)(e.disabled),m=Object(p.a)(u,2),v=m[0],g=m[1];return n.a.createElement(de.a,{className:t.root},v?n.a.createElement(I.a,{className:t.buttonEdit,"aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",component:"span",color:"primary",onClick:function(){return g(!1)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Ze.a,null)):n.a.createElement(I.a,{className:t.buttonEdit+" "+t.buttonSuccess,"aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",component:"span",color:"secondary",disabled:!d,onClick:function(){g(!0),i?e.updateItemInTariffs(i):e.insertItemToTariffs()},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(tt.a,{className:d?t.buttonIconSuccess:t.buttonIconSuccessDisabled})),n.a.createElement(I.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(i)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Ve.a,null)),n.a.createElement(ue.a,{className:t.cardPadding},n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(ge.a,{className:t.textField},n.a.createElement(fe.a,null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),n.a.createElement(be.a,{value:l.value,onChange:function(t){return e.updateTariffInState(i,"name",t.target.value)},disabled:v,error:!l.valid&&l.touched},n.a.createElement(Ee.a,{value:"water"},"\u041f\u043e\u0434\u0430\u0447\u0430 \u0432\u043e\u0434\u044b"),n.a.createElement(Ee.a,{value:"hot_water"},"\u041f\u043e\u0434\u043e\u0433\u0440\u0435\u0432 \u0432\u043e\u0434\u044b"),n.a.createElement(Ee.a,{value:"disposal_water"},"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435"),n.a.createElement(Ee.a,{value:"electricity_day"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u0434\u0435\u043d\u044c"),n.a.createElement(Ee.a,{value:"electricity_night"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u043d\u043e\u0447\u044c")),!l.valid&&l.touched?n.a.createElement($e.a,null,l.errorMessage):null)),n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(pe.a,{className:t.textField,label:"\u0422\u0430\u0440\u0438\u0444",currencySymbol:"\u20bd",value:o.value,minimumValue:"0",maximumValue:"5000",disabled:v,onChange:function(t,a){return e.updateTariffInState(i,"cost",a)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})),n.a.createElement(Xe.a,{utils:Ge.a},n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(Je.a,{clearable:!0,label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d c",format:"dd.MM.yyyy",value:s.value,className:t.textFieldMargin+" "+t.textField,disabled:v,onChange:function(t){return e.updateTariffInState(i,"dateStart",t)},error:!s.valid&&s.touched,helperText:!s.valid&&s.touched?s.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(Je.a,{clearable:!0,label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u043f\u043e",format:"dd.MM.yyyy",value:c.value,className:t.textField,disabled:v,onChange:function(t){return e.updateTariffInState(i,"dateEnd",t)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null}))))))},nt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={tariffs:[],deleteDialogOpen:!1,deleteTariffId:null,addButtonDisabled:!1},e.getListOfTariffs=function(){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");G.get("/tariffs.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"')).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=Object.keys(t.data).map((function(e){var a={};return a.name={value:t.data[e].name,validation:{required:!0},valid:!0,errorMessage:"",touched:!0},a.cost={value:t.data[e].cost,validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},a.dateStart={value:t.data[e].dateStart,validation:{isDate:!0},valid:!0,errorMessage:"",touched:!0},a.dateEnd={value:t.data[e].dateEnd,validation:{isDate:!0},valid:!0,errorMessage:"",touched:!0},a.id=e,a.tariffValid=!0,a.userId=t.data[e].userId,a}));e.setState({tariffs:a})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.deleteItemFromTariffs=function(){var t=localStorage.getItem("token");G.delete("/tariffs/".concat(e.state.deleteTariffId,".json?auth=").concat(t)).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteTariffId:null}),e.props.enqueueSnackbar("\u041e\u0431\u044a\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!",{variant:"info",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateItemInTariffs=function(t){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438",t);var a=localStorage.getItem("token"),r=e.state.tariffs.find((function(e){return e.id===t})),n={cost:r.cost.value,dateEnd:r.dateEnd.value,dateStart:r.dateStart.value,name:r.name.value,userId:r.userId};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",n),G.patch("/tariffs/".concat(t,".json?auth=").concat(a),n).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.insertItemToTariffs=function(){console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438");var t=localStorage.getItem("token"),a=localStorage.getItem("userId"),r=e.state.tariffs[0],n={cost:r.cost.value,dateEnd:r.dateEnd.value,dateStart:r.dateStart.value,name:r.name.value,userId:a};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",n),G.post("/tariffs.json?auth=".concat(t),n).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({addButtonDisabled:!1}),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.handleDeleteDialogOpen=function(t){"undefined"!==typeof t?e.setState({deleteDialogOpen:!0,deleteTariffId:t}):e.removeTariffFromState(t)},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeTariffFromState(e.state.deleteTariffId),e.deleteItemFromTariffs(),e.handleDeleteDialogClose()},e.addTariffToState=function(){var t=Object(Oe.a)(e.state.tariffs);t.unshift({name:{value:"",validation:{required:!0},valid:!1,errorMessage:"",touched:!1},cost:{value:0,validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},dateStart:{value:null,validation:{isDate:!0},valid:!1,errorMessage:"",touched:!1},dateEnd:{value:null,validation:{isDate:!0},valid:!1,errorMessage:"",touched:!1}}),e.setState({tariffs:t,addButtonDisabled:!0})},e.removeTariffFromState=function(t){var a=Object(Oe.a)(e.state.tariffs);a=a.filter((function(e){return e.id!==t})),e.state.addButtonDisabled?e.setState({tariffs:a,addButtonDisabled:!1}):e.setState({tariffs:a})},e.updateTariffInState=function(t,a,r){var n=Object(Oe.a)(e.state.tariffs),i=n.findIndex((function(e){return e.id===t})),l=Z(r,n[i][a].validation);n[i]=Object(q.a)(Object(q.a)({},e.state.tariffs[i]),{},Object(R.a)({},a,Object(q.a)(Object(q.a)({},e.state.tariffs[i][a]),{},{value:r,valid:l.isValid,errorMessage:l.errorMessage,touched:!0})));var o=e.checkFormValidity(n[i]);n[i].tariffValid=o,e.setState({tariffs:n})},e.checkFormValidity=function(e){var t=e.name,a=e.cost,r=e.dateStart,n=e.dateEnd;return!!(t.valid&&a.valid&&r.valid&&n.valid)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getListOfTariffs()}},{key:"render",value:function(){var e=this,t=null;return t=0===this.state.tariffs.length?n.a.createElement(ke,null):this.state.tariffs.map((function(t,a){return n.a.createElement(rt,{key:"undefined"!==typeof t.id?t.id:a,tariff:t,disabled:"undefined"!==typeof t.id,handleDeleteDialogOpen:e.handleDeleteDialogOpen,handleDeleteDialogContinue:e.handleDeleteDialogContinue,updateItemInTariffs:e.updateItemInTariffs,updateTariffInState:e.updateTariffInState,insertItemToTariffs:e.insertItemToTariffs})})),n.a.createElement("div",null,n.a.createElement(Ke,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.",activeButtonName:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u0422\u0430\u0440\u0438\u0444\u044b"),n.a.createElement(h.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center",alignContent:"center",wrap:"nowrap"},n.a.createElement(ce.a,{onClick:function(){return e.addTariffToState(t)},color:"primary",disabled:this.state.addButtonDisabled},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444")),t)}}]),a}(r.Component),it=Object(Re.b)(nt),lt=a(394),ot=Object(f.a)({field:{width:"100%"},buttonPosition:{textAlign:"center"}}),ct=function(e){var t=ot(),a=e.userDetails,r=a.firstName,i=a.lastName,l=a.userEmail,o=a.accountantEmail,c=a.address,s=e.prevIndicators,d=s.prevIndicatorsDate,u=s.electricityDay,m=s.electricityNight,v=s.kitchenColdWater,p=s.kitchenHotWater,g=s.bathroomColdWater,f=s.bathroomHotWater;return n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",align:"center"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(lt.a,{label:"\u0418\u043c\u044f",value:r.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("firstName",t.target.value)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(lt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:i.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("lastName",t.target.value)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"\u0410\u0434\u0440\u0435\u0441",value:c.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("address",t.target.value)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430",value:l.value,disabled:!0,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("userEmail",t.target.value)}})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"\u041f\u043e\u0447\u0442\u0430 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u0438",value:o.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("accountantEmail",t.target.value)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",align:"center"},"\u041f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438")),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Xe.a,{utils:Ge.a},n.a.createElement(Je.a,{clearable:!0,className:t.field,disabled:e.isDisabled,label:"\u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439",format:"dd.MM.yyyy",value:d.value,onChange:function(t){return e.updatePrevIndicatorsInState("prevIndicatorsDate",t)},error:!d.valid&&d.touched,helperText:!d.valid&&d.touched?d.errorMessage:null}))),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u0414\u0435\u043d\u044c",currencySymbol:"",value:u.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityDay",a)},error:!u.valid&&u.touched,helperText:!u.valid&&u.touched?u.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u041d\u043e\u0447\u044c",currencySymbol:"",value:m.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityNight",a)},error:!m.valid&&m.touched,helperText:!m.valid&&m.touched?m.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:v.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenColdWater",a)},error:!v.valid&&v.touched,helperText:!v.valid&&v.touched?v.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:p.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenHotWater",a)},error:!p.valid&&p.touched,helperText:!p.valid&&p.touched?p.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:g.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomColdWater",a)},error:!g.valid&&g.touched,helperText:!g.valid&&g.touched?g.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:f.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomHotWater",a)},error:!f.valid&&f.touched,helperText:!f.valid&&f.touched?f.errorMessage:null})),n.a.createElement(h.a,{className:t.buttonPosition,item:!0,xs:12},n.a.createElement(ce.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){e.checkFormValidity()&&e.updateUserDetails()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))},st=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={userDetails:{firstName:{value:"",validation:{required:!0},valid:!0,errorMessage:"",touched:!0},lastName:{value:"",validation:{required:!0},valid:!0,errorMessage:"",touched:!0},userEmail:{value:""},accountantEmail:{value:"",validation:{isEmail:!0},valid:!0,errorMessage:"",touched:!0},address:{value:"",validation:{required:!0},valid:!0,errorMessage:"",touched:!0}},userDetailsValid:!1,prevIndicators:{prevIndicatorsDate:{value:null,validation:{isDate:!0},valid:!0,errorMessage:"",touched:!0},electricityDay:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},electricityNight:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},kitchenColdWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},kitchenHotWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},bathroomColdWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},bathroomHotWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0}},prevIndicatorsValid:!1,userId:null},e.getUserDetails=function(t){console.log("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e UserId: ",t);var a=localStorage.getItem("token");G.get("/users.json?auth=".concat(a,'&orderBy="userId"&equalTo="').concat(t,'"')).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=t.data[Object.keys(t.data)],r=Object(q.a)(Object(q.a)({},e.state.userDetails),{},{firstName:Object(q.a)(Object(q.a)({},e.state.userDetails.firstName),{},{value:a.userDetails.firstName}),lastName:Object(q.a)(Object(q.a)({},e.state.userDetails.lastName),{},{value:a.userDetails.lastName}),userEmail:Object(q.a)(Object(q.a)({},e.state.userDetails.userEmail),{},{value:a.userDetails.userEmail}),accountantEmail:Object(q.a)(Object(q.a)({},e.state.userDetails.accountantEmail),{},{value:a.userDetails.accountantEmail}),address:Object(q.a)(Object(q.a)({},e.state.userDetails.address),{},{value:a.userDetails.address})}),n=Object(q.a)(Object(q.a)({},e.state.prevIndicators),{},{prevIndicatorsDate:Object(q.a)(Object(q.a)({},e.state.prevIndicators.prevIndicatorsDate),{},{value:a.prevIndicators.prevIndicatorsDate}),electricityDay:Object(q.a)(Object(q.a)({},e.state.prevIndicators.electricityDay),{},{value:a.prevIndicators.electricity.day}),electricityNight:Object(q.a)(Object(q.a)({},e.state.prevIndicators.electricityNight),{},{value:a.prevIndicators.electricity.night}),kitchenColdWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.kitchenColdWater),{},{value:a.prevIndicators.kitchen.coldWater}),kitchenHotWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.kitchenHotWater),{},{value:a.prevIndicators.kitchen.hotWater}),bathroomColdWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.bathroomColdWater),{},{value:a.prevIndicators.bathroom.coldWater}),bathroomHotWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.bathroomHotWater),{},{value:a.prevIndicators.bathroom.hotWater})});e.setState({userDetails:r,prevIndicators:n,id:Object.keys(t.data)[0],userId:a.userId})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.updateUserDetails=function(){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u043f\u043e Id: ",e.state.id);var t=localStorage.getItem("token"),a={userDetails:{firstName:e.state.userDetails.firstName.value,lastName:e.state.userDetails.lastName.value,userEmail:e.state.userDetails.userEmail.value,accountantEmail:e.state.userDetails.accountantEmail.value,address:e.state.userDetails.address.value},prevIndicators:{prevIndicatorsDate:e.state.prevIndicators.prevIndicatorsDate.value,electricity:{day:e.state.prevIndicators.electricityDay.value,night:e.state.prevIndicators.electricityNight.value},kitchen:{coldWater:e.state.prevIndicators.kitchenColdWater.value,hotWater:e.state.prevIndicators.kitchenHotWater.value},bathroom:{coldWater:e.state.prevIndicators.bathroomColdWater.value,hotWater:e.state.prevIndicators.bathroomHotWater.value}},userId:localStorage.getItem("userId")};G.patch("/users/".concat(e.state.id,".json?auth=").concat(t),a).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateUserDataInState=function(t,a){var r=Z(a,e.state.userDetails[t].validation),n=Object(q.a)(Object(q.a)({},e.state.userDetails),{},Object(R.a)({},t,Object(q.a)(Object(q.a)({},e.state.userDetails[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity();e.setState({userDetails:n,userDetailsValid:i})},e.updatePrevIndicatorsInState=function(t,a){var r=Z(a,e.state.prevIndicators[t].validation),n=Object(q.a)(Object(q.a)({},e.state.prevIndicators),{},Object(R.a)({},t,Object(q.a)(Object(q.a)({},e.state.prevIndicators[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity();e.setState({prevIndicators:n,prevIndicatorsValid:i})},e.checkFormValidity=function(){var t=e.state.userDetails,a=t.firstName,r=t.lastName,n=t.accountantEmail,i=t.address,l=e.state.prevIndicators,o=l.prevIndicatorsDate,c=l.electricityDay,s=l.electricityNight,d=l.kitchenColdWater,u=l.kitchenHotWater,m=l.bathroomColdWater,h=l.bathroomHotWater;return!!(a.valid&&r.valid&&n.valid&&i.valid&&o.valid&&c.valid&&s.valid&&d.valid&&u.valid&&m.valid&&h.valid)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getUserDetails(localStorage.getItem("userId"))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),null===this.state.userId?n.a.createElement(ke,null):n.a.createElement(he,null,n.a.createElement(ct,{userDetails:this.state.userDetails,prevIndicators:this.state.prevIndicators,updateUserDataInState:this.updateUserDataInState,updatePrevIndicatorsInState:this.updatePrevIndicatorsInState,checkFormValidity:this.checkFormValidity,updateUserDetails:this.updateUserDetails})))}}]),a}(r.Component),dt=Object(Re.b)(st),ut=function(e,t){return function(a){a(pt()),a(function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}}(e,t))}},mt=function(e){return{type:"AUTH_FAIL",error:e}},ht=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},vt=function(e){return function(t){setTimeout((function(){t(ht())}),1e3*e)}},pt=function(){return function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");G.get("/users.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"')).then((function(t){console.log(t);var a,r,n,i=t.data[Object.keys(t.data)];e((a=i.userDetails,r=i.prevIndicators,n=Object.keys(t.data)[0],{type:"LOAD_USERDATA_SUCCESS",userDetails:a,prevIndicators:r,userIdDb:n}))})).catch((function(e){console.log(e)}))}},gt=(a(332),a(396)),ft=a(4),bt=Object(ft.a)({root:{marginBottom:"10px"}})(gt.a),Et=function(e){return n.a.createElement(bt,e,e.children)},yt=Object(ft.a)({root:{width:"100%",textTransform:"none",margin:"30px 0 10px 0"}})(ce.a),It=function(e){return n.a.createElement(yt,Object.assign({variant:"contained",color:"primary"},e),e.children)},Dt=a(198),Ot=Object(f.a)((function(e){return Object(Dt.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),St=function(e){var t=Ot();return n.a.createElement(lt.a,Object.assign({className:t.root,variant:"outlined",inputProps:{className:t.input}},e))},jt=a(380),kt=a(278),xt=a.n(kt),Ct=a(279),Wt=a.n(Ct),wt=Object(f.a)((function(e){return Object(Dt.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),Mt=function(e){var t=wt(),a=n.a.useState({showPassword:!1}),r=Object(p.a)(a,2),i=r[0],l=r[1];return n.a.createElement(lt.a,Object.assign({className:t.root,variant:"outlined",type:i.showPassword?"text":"password",inputProps:{className:t.input},InputProps:{endAdornment:n.a.createElement(jt.a,{position:"end"},n.a.createElement(I.a,{"aria-label":"toggle password visibility",onClick:function(){l(Object(q.a)(Object(q.a)({},i),{},{showPassword:!i.showPassword}))},edge:"end"},i.showPassword?n.a.createElement(xt.a,null):n.a.createElement(Wt.a,null)))}},e))},Tt=a(381),Nt=a(280),Vt=a.n(Nt),Ut=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={auth:{email:{value:"",validation:{isEmail:!0},valid:!1,touched:!1},password:{value:"",validation:{isPassord:!0},valid:!1,touched:!1}},authValid:!1},e.inputHandler=function(t,a){var r=Z(a,e.state.auth[t].validation),n=Object(q.a)(Object(q.a)({},e.state.auth),{},Object(R.a)({},t,Object(q.a)(Object(q.a)({},e.state.auth[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity(n);e.setState({auth:n,authValid:i})},e.checkFormValidity=function(t){if("undefined"!==typeof t){var a=t.email,r=t.password;if(a.valid&&r.valid)return!0}if("undefined"===typeof t){var n=Object(q.a)(Object(q.a)({},e.state.auth),{},{email:Object(q.a)(Object(q.a)({},e.state.auth.email),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),password:Object(q.a)(Object(q.a)({},e.state.auth.password),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})});e.setState({auth:n})}return!1},e.formSenderHandler=function(){e.props.onAuth(e.state.auth.email.value,e.state.auth.password.value)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.auth,a=t.email,r=t.password;return n.a.createElement("div",{className:"auth_container"},n.a.createElement("form",null,n.a.createElement("div",{className:"lockIconContainer"},n.a.createElement("div",{className:"roundIcon"},n.a.createElement(Vt.a,null))),n.a.createElement(S.a,{className:"authHeader",variant:"h5",align:"center"},"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043a\u043e\u043c\u043c\u0443\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439"),this.props.errorMessage?n.a.createElement(Et,{severity:"error"},this.props.errorMessage):null,n.a.createElement(St,{key:"email",id:"email",label:"\u041f\u043e\u0447\u0442\u0430",name:"email",error:!a.valid&&a.touched,helperText:!a.valid&&a.touched?a.errorMessage:null,onChange:function(t){return e.inputHandler("email",t.target.value)},value:a.value}),n.a.createElement(Mt,{key:"password",id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null,onChange:function(t){return e.inputHandler("password",t.target.value)},value:r.value}),n.a.createElement(It,{onClick:this.state.authValid?function(){return e.formSenderHandler()}:function(){return e.checkFormValidity()}},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),n.a.createElement(S.a,null,n.a.createElement(Tt.a,{component:g.b,to:"/registration",variant:"body2"},"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))}}]),a}(r.Component),Ft=Object(m.b)((function(e){return{isAuth:null!==e.token,loading:e.loading,errorMessage:e.error}}),(function(e){return{onAuth:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"});var r={email:e,password:t,returnSecureToken:!0},n="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat($.AUTH_API_KEY);G.post(n,r).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),a(ut(e.data.idToken,e.data.localId)),a(vt(e.data.expiresIn))})).catch((function(e){console.log(e),a(mt(e.response.data.error))}))}}(t,a))}}}))(Ut),_t=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onLogout(this.props.history)}},{key:"render",value:function(){return n.a.createElement(u.a,{to:"/"})}}]),a}(r.Component),At=Object(m.b)(null,(function(e){return{onLogout:function(){return e(ht())}}}))(_t),Ht=a(385),Bt=a(383),Pt=a(384),Yt=function(e){var t=e.userDetails,a=t.firstName,r=t.lastName,i=t.userEmail,l=t.password,o=t.accountantEmail,c=t.address;return n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"Email",disabled:e.isDisabled,value:i.value,type:"email",autoComplete:"off",fullWidth:!0,onChange:function(t){return e.updateUserDataInState("userEmail",t.target.value)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:e.isDisabled,value:l.value,type:"password",autoComplete:"new-password",fullWidth:!0,onChange:function(t){return e.updateUserDataInState("password",t.target.value)},error:!l.valid&&l.touched,helperText:!l.valid&&l.touched?l.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(lt.a,{fullWidth:!0,label:"\u0418\u043c\u044f",value:a.value,onChange:function(t){return e.updateUserDataInState("firstName",t.target.value)},disabled:e.isDisabled,error:!a.valid&&a.touched,helperText:!a.valid&&a.touched?a.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(lt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",disabled:e.isDisabled,value:r.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("lastName",t.target.value)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"\u0410\u0434\u0440\u0435\u0441",disabled:e.isDisabled,value:c.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("address",t.target.value)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(lt.a,{label:"\u041f\u043e\u0447\u0442\u0430 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u0438",disabled:e.isDisabled,value:o.value,type:"email",fullWidth:!0,onChange:function(t){return e.updateUserDataInState("accountantEmail",t.target.value)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})))},Lt=Object(f.a)({field:{width:"100%"}}),Kt=function(e){var t=Lt(),a=e.prevIndicators,r=a.prevIndicatorsDate,i=a.electricityDay,l=a.electricityNight,o=a.kitchenColdWater,c=a.kitchenHotWater,s=a.bathroomColdWater,d=a.bathroomHotWater;return n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Xe.a,{utils:Ge.a},n.a.createElement(Je.a,{clearable:!0,className:t.field,disabled:e.isDisabled,label:"\u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439",format:"dd.MM.yyyy",value:r.value,onChange:function(t){return e.updatePrevIndicatorsInState("prevIndicatorsDate",t)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null}))),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u0414\u0435\u043d\u044c",currencySymbol:"",value:i.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityDay",a)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u041d\u043e\u0447\u044c",currencySymbol:"",value:l.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityNight",a)},error:!l.valid&&l.touched,helperText:!l.valid&&l.touched?l.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:o.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenColdWater",a)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:c.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenHotWater",a)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:s.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomColdWater",a)},error:!s.valid&&s.touched,helperText:!s.valid&&s.touched?s.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(pe.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:d.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomHotWater",a)},error:!d.valid&&d.touched,helperText:!d.valid&&d.touched?d.errorMessage:null})))},Rt=Object(f.a)((function(e){return{root:{width:"100%","& .MuiStepper-root":{padding:"24px 0 0 0"}},stepLabel:{wordBreak:"break-word"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var qt=function(e){var t=Rt(),a=n.a.useState(0),r=Object(p.a)(a,2),i=r[0],l=r[1],o=["\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438","\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"];return n.a.createElement("div",{className:t.root},n.a.createElement(Ht.a,{activeStep:i,alternativeLabel:!0},o.map((function(e){return n.a.createElement(Bt.a,{key:e},n.a.createElement(Pt.a,{classes:{root:t.stepLabel}},e))}))),n.a.createElement("div",null,i===o.length?n.a.createElement("div",null,n.a.createElement(S.a,{className:t.instructions},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"),n.a.createElement(ce.a,{variant:"contained",color:"primary",component:g.b,to:"/auth"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443")):n.a.createElement("div",null,n.a.createElement(he,null,function(t){switch(t){case 0:return n.a.createElement(Yt,{userDetails:e.userDetails,updateUserDataInState:e.updateUserDataInState,isDisabled:!1});case 1:return n.a.createElement(Kt,{prevIndicators:e.prevIndicators,updatePrevIndicatorsInState:e.updatePrevIndicatorsInState,isDisabled:!1});case 2:return n.a.createElement("div",null,n.a.createElement(S.a,{variant:"h5",align:"center",style:{padding:"0 0 20px 0"}},"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),n.a.createElement(Yt,{userDetails:e.userDetails,updateUserDataInState:e.updateUserDataInState,isDisabled:!0}),n.a.createElement(S.a,{variant:"h5",align:"center",style:{padding:"20px 0"}},"\u041f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438"),n.a.createElement(Kt,{prevIndicators:e.prevIndicators,updatePrevIndicatorsInState:e.updatePrevIndicatorsInState,isDisabled:!0}));default:return"Unknown stepIndex"}}(i,e.updateUserDataInState,e.updatePrevIndicatorsInState,e.userDetails,e.prevIndicators)),n.a.createElement("div",{style:{marginBottom:"20px"}},n.a.createElement(ce.a,{disabled:0===i,onClick:function(){l((function(e){return e-1}))},className:t.backButton},"\u041d\u0430\u0437\u0430\u0434"),n.a.createElement(ce.a,{variant:"contained",color:"primary",onClick:function(){0===i&&(e.userDetailsValid?l((function(e){return e+1})):e.checkFormValidity("userDetails")),1===i&&(e.prevIndicatorsValid?l((function(e){return e+1})):e.checkFormValidity("prevIndicators")),2===i&&e.registration()}},i===o.length-1?"\u0413\u043e\u0442\u043e\u0432\u043e":"\u0414\u0430\u043b\u0435\u0435")))))},zt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={userDetails:{firstName:{value:"",validation:{required:!0},valid:!1,errorMessage:"",touched:!1},lastName:{value:"",validation:{required:!0},valid:!1,touched:!1},userEmail:{value:"",validation:{isEmail:!0},valid:!1,touched:!1},password:{value:"",validation:{isPassord:!0},valid:!1,touched:!1},accountantEmail:{value:"",validation:{isEmail:!0},valid:!1,touched:!1},address:{value:"",validation:{required:!0},valid:!1,touched:!1}},userDetailsValid:!1,prevIndicators:{prevIndicatorsDate:{value:null,validation:{isDate:!0},valid:!1,errorMessage:"",touched:!1},electricityDay:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},electricityNight:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},kitchenColdWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},kitchenHotWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},bathroomColdWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},bathroomHotWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1}},prevIndicatorsValid:!1},e.registration=function(){var t={userDetails:{firstName:e.state.userDetails.firstName.value,lastName:e.state.userDetails.lastName.value,userEmail:e.state.userDetails.userEmail.value,accountantEmail:e.state.userDetails.accountantEmail.value,address:e.state.userDetails.address.value},prevIndicators:{prevIndicatorsDate:e.state.prevIndicators.prevIndicatorsDate.value,electricity:{day:e.state.prevIndicators.electricityDay.value,night:e.state.prevIndicators.electricityNight.value},kitchen:{coldWater:e.state.prevIndicators.kitchenColdWater.value,hotWater:e.state.prevIndicators.kitchenHotWater.value},bathroom:{coldWater:e.state.prevIndicators.bathroomColdWater.value,hotWater:e.state.prevIndicators.bathroomHotWater.value}}};e.props.onRegistration(e.state.userDetails.userEmail.value,e.state.userDetails.password.value,t)},e.updateUserDataInState=function(t,a){var r=Z(a,e.state.userDetails[t].validation),n=Object(q.a)(Object(q.a)({},e.state.userDetails),{},Object(R.a)({},t,Object(q.a)(Object(q.a)({},e.state.userDetails[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity("userDetails",n);e.setState({userDetails:n,userDetailsValid:i})},e.updatePrevIndicatorsInState=function(t,a){var r=Z(a,e.state.prevIndicators[t].validation),n=Object(q.a)(Object(q.a)({},e.state.prevIndicators),{},Object(R.a)({},t,Object(q.a)(Object(q.a)({},e.state.prevIndicators[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity("prevIndicators",n);e.setState({prevIndicators:n,prevIndicatorsValid:i})},e.checkFormValidity=function(t,a){if("userDetails"===t&&"undefined"!==typeof a){var r=a.firstName,n=a.lastName,i=a.userEmail,l=a.password,o=a.accountantEmail,c=a.address;if(r.valid&&n.valid&&i.valid&&l.valid&&o.valid&&c.valid)return!0}if("userDetails"===t&&"undefined"===typeof a){var s=Object(q.a)(Object(q.a)({},e.state.userDetails),{},{firstName:Object(q.a)(Object(q.a)({},e.state.userDetails.firstName),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),lastName:Object(q.a)(Object(q.a)({},e.state.userDetails.lastName),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),userEmail:Object(q.a)(Object(q.a)({},e.state.userDetails.userEmail),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),password:Object(q.a)(Object(q.a)({},e.state.userDetails.password),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),accountantEmail:Object(q.a)(Object(q.a)({},e.state.userDetails.accountantEmail),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),address:Object(q.a)(Object(q.a)({},e.state.userDetails.address),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})});e.setState({userDetails:s})}if("prevIndicators"===t&&"undefined"!==typeof a){var d=a.prevIndicatorsDate,u=a.electricityDay,m=a.electricityNight,h=a.kitchenColdWater,v=a.kitchenHotWater,p=a.bathroomColdWater,g=a.bathroomHotWater;if(d.valid&&u.valid&&m.valid&&h.valid&&v.valid&&p.valid&&g.valid)return!0}if("prevIndicators"===t&&"undefined"===typeof a){var f=Object(q.a)(Object(q.a)({},e.state.prevIndicators),{},{prevIndicatorsDate:Object(q.a)(Object(q.a)({},e.state.prevIndicators.prevIndicatorsDate),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),electricityDay:Object(q.a)(Object(q.a)({},e.state.prevIndicators.electricityDay),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),electricityNight:Object(q.a)(Object(q.a)({},e.state.prevIndicators.electricityNight),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),kitchenColdWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.kitchenColdWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),kitchenHotWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.kitchenHotWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),bathroomColdWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.bathroomColdWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),bathroomHotWater:Object(q.a)(Object(q.a)({},e.state.prevIndicators.bathroomHotWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})});e.setState({prevIndicators:f})}return!1},e}return Object(c.a)(a,[{key:"render",value:function(){return this.props.errorMessage&&window.scrollTo(0,0),n.a.createElement("div",null,n.a.createElement(S.a,{style:{position:"absolute",top:"10px",right:"15px"}},n.a.createElement(Tt.a,{component:g.b,to:"/auth",variant:"body2"},"\u0412\u043e\u0439\u0442\u0438")),n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),this.props.errorMessage?n.a.createElement(gt.a,{severity:"error"},this.props.errorMessage):null,n.a.createElement(qt,{userDetails:this.state.userDetails,userDetailsValid:this.state.userDetailsValid,prevIndicators:this.state.prevIndicators,prevIndicatorsValid:this.state.prevIndicatorsValid,updateUserDataInState:this.updateUserDataInState,updatePrevIndicatorsInState:this.updatePrevIndicatorsInState,checkFormValidity:this.checkFormValidity,registration:this.registration}))}}]),a}(r.Component),Gt=Object(m.b)((function(e){return{errorMessage:e.error}}),(function(e){return{onRegistration:function(t,a,r){return e(function(e,t,a){return function(r){r({type:"AUTH_START"});var n={email:e,password:t,returnSecureToken:!0},i="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat($.AUTH_API_KEY);G.post(i,n).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),r(ut(e.data.idToken,e.data.localId)),r(vt(e.data.expiresIn)),a.userId=e.data.localId,G.post("/users.json?auth=".concat(e.data.idToken),a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),r(mt(e.response.data.error))}))}}(t,a,r))}}}))(zt),Xt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var e=n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/auth",component:Ft}),n.a.createElement(u.b,{path:"/registration",component:Gt}),n.a.createElement(u.a,{to:"/auth"}));return localStorage.getItem("userId")&&(e=n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/outlay",component:ze}),n.a.createElement(u.b,{path:"/send-indicators",component:De}),n.a.createElement(u.b,{path:"/tariffs",component:it}),n.a.createElement(u.b,{path:"/profile",component:dt}),n.a.createElement(u.b,{path:"/logout",component:At}),n.a.createElement(u.a,{to:"/send-indicators"}))),n.a.createElement(K,{isAuth:this.props.isAuth},e)}}]),a}(r.Component),Jt=Object(m.b)((function(e){return{isAuth:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(ht());else{var r=localStorage.getItem("userId");e(ut(t,r)),e(vt((a.getTime()-(new Date).getTime())/1e3))}}else e(ht())}))}}}))(Xt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $t=a(104),Qt=a(281),Zt=function(e,t){return Object(q.a)(Object(q.a)({},e),t)},ea={token:null,userId:null,error:null,loading:!1,userDetails:null,prevIndicators:null,userIdDb:null},ta=function(e){return Zt(e,{error:null,loading:!0})},aa=function(e,t){return Zt(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},ra=function(e,t){var a;return console.log(t.error),a=401===t.error.code?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443":400===t.error.code&&"EMAIL_EXISTS"===t.error.message?"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":400===t.error.code&&"EMAIL_NOT_FOUND"===t.error.message?"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0435\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",Zt(e,{error:a,loading:!1})},na=function(e){return Zt(e,{token:null,userId:null})},ia=function(e,t){return Zt(e,{userDetails:t.userDetails,prevIndicators:t.prevIndicators,userIdDb:t.userIdDb})},la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return ta(e);case"AUTH_SUCCESS":return aa(e,t);case"AUTH_FAIL":return ra(e,t);case"AUTH_LOGOUT":return na(e);case"LOAD_USERDATA_SUCCESS":return ia(e,t);default:return e}},oa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$t.c,ca=Object($t.d)(la,oa(Object($t.a)(Qt.a))),sa=n.a.createElement(m.a,{store:ca},n.a.createElement(g.a,{basename:"/"},n.a.createElement(Re.a,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"right"}},n.a.createElement(Jt,null))));l.a.render(sa,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e){e.exports=JSON.parse('{"SERVICE_ID":"gmail","TEMPLATE_ID":"template_83dCi3ca","USER_ID":"user_rEIgP6Z8hPXkwIosFYkR7","AUTH_API_KEY":"AIzaSyCQ-YIBbLpl1SOF7KzaSR0v7HLz61N-yno"}')}},[[295,1,2]]]);
//# sourceMappingURL=main.91cd8d3f.chunk.js.map