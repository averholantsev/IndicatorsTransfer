(this.webpackJsonpindicators_transfer=this.webpackJsonpindicators_transfer||[]).push([[0],{294:function(e,t,a){e.exports=a(332)},299:function(e,t,a){},305:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(12),l=a.n(i),o=(a(299),a(300),a(28)),c=a(29),s=a(31),d=a(30),u=a(25),m=a(44),h=(a(305),a(364)),v=a(86),p=a(58),g=a(42),f=a(196),b=a(358),E=a(359),y=a(360),I=a(335),D=a(269),O=a.n(D),S=a(67),k=a(268),j=a.n(k),x=a(55),C=a(336),w=a(337),T=a(362),N=a(363),W=a(264),M=a.n(W),V=a(265),U=a.n(V),H=a(266),F=a.n(H),_=a(267),A=a.n(_),P=[{name:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f",path:"/send-indicators",icon:n.a.createElement(M.a,null)},{name:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b",path:"/outlay",icon:n.a.createElement(U.a,null)},{name:"\u0422\u0430\u0440\u0438\u0444\u044b",path:"/tariffs",icon:n.a.createElement(F.a,null)},{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",path:"/profile",icon:n.a.createElement(A.a,null)}],B=Object(f.a)((function(e){return{root:{flexGrow:1,width:"100%"},button:{"&:hover":{color:"white"}},grow:{flexGrow:1},list:{width:250}}})),L=function(e){var t=B(),a="";switch(console.log(window.location.hash),window.location.hash){case"#/send-indicators":a="\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f";break;case"#/outlay":a="\u0420\u0430\u0441\u0445\u043e\u0434\u044b";break;case"#/tariffs":a="\u0422\u0430\u0440\u0438\u0444\u044b";break;case"#/profile":a="\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}var i=Object(r.useState)(a),l=Object(p.a)(i,2),o=l[0],c=l[1],s=Object(r.useState)(!1),d=Object(p.a)(s,2),u=d[0],m=d[1],h=Object(b.a)("(min-width:425px)");return n.a.createElement("div",{className:t.root},n.a.createElement(E.a,{position:"relative"},n.a.createElement(y.a,null,n.a.createElement(I.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return m(!0)}},n.a.createElement(j.a,null)),n.a.createElement(S.a,{variant:"h6"},o),n.a.createElement("div",{className:t.grow}),e.userDetails&&h?n.a.createElement(S.a,{variant:"h6"},e.userDetails.firstName+" "+e.userDetails.lastName):null,n.a.createElement(I.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",component:g.b,to:"/logout"},n.a.createElement(O.a,null))),n.a.createElement(x.a,{className:t.drawer,anchor:"left",open:u,onClose:function(){return m(!1)}},n.a.createElement(C.a,{className:t.list},P.map((function(e){return n.a.createElement(w.a,{button:!0,key:e.name,component:g.b,to:e.path,onClick:function(){m(!1),c(e.name)}},n.a.createElement(T.a,null,e.icon),n.a.createElement(N.a,{primary:e.name}))}))))))},Y=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(h.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"center"},this.props.isAuth&&n.a.createElement(h.a,{item:!0,xs:12,style:{width:"100%"}},n.a.createElement(L,{userDetails:this.props.userDetails})),n.a.createElement(h.a,{item:!0,xs:12,style:{width:"100%"}},n.a.createElement(v.a,{className:"paper"},this.props.children)))}}]),a}(r.Component),K=Object(m.b)((function(e){return{userDetails:e.userDetails}}))(Y),R=a(7),q=a(270),z=a.n(q).a.create({baseURL:"https://reacttestproject-70f65.firebaseio.com/"}),G=[{key:"0",text:"\u042f\u043d\u0432\u0430\u0440\u044c",value:0},{key:"1",text:"\u0424\u0435\u0432\u0430\u0440\u043b\u044c",value:1},{key:"2",text:"\u041c\u0430\u0440\u0442",value:2},{key:"3",text:"\u0410\u043f\u0440\u0435\u043b\u044c",value:3},{key:"4",text:"\u041c\u0430\u0439",value:4},{key:"5",text:"\u0418\u044e\u043d\u044c",value:5},{key:"6",text:"\u0418\u044e\u043b\u044c",value:6},{key:"7",text:"\u0410\u0432\u0433\u0443\u0441\u0442",value:7},{key:"8",text:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",value:8},{key:"9",text:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",value:9},{key:"10",text:"\u041d\u043e\u044f\u0431\u0440\u044c",value:10},{key:"11",text:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",value:11}],X=a(271),$=a.n(X),J=a(84),Q=a(24),Z=a.n(Q),ee=(a(329),a(371)),te=a(372),ae=a(373),re=a(375),ne=a(367),ie=a(368),le=a(369),oe=a(198),ce=a(346),se=a(352),de=a(380),ue=a(377),me=a(376),he=a(384);function ve(e){return n.a.createElement(ue.a,{row:!0},n.a.createElement(me.a,{control:n.a.createElement(he.a,{checked:e.checked,onChange:e.switchChange,name:e.label,color:"primary"}),label:e.label}))}var pe=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={indicators:{electricityDay:{value:"",valid:!0},electricityNight:{value:"",valid:!0},coldWaterKitchen:{value:"",valid:!0},coldWaterBathroom:{value:"",valid:!0},hotWaterKitchen:{value:"",valid:!0},hotWaterBathroom:{value:"",valid:!0}},monthYear:{month:(new Date).getMonth(),year:(new Date).getFullYear()},sendDataToAccountant:!0,modalOpen:!1},e.addIndicatorHandler=function(t,a){var r=a,n=Object(R.a)({},e.state.indicators);n[t].value=r,n[t].valid=!0,e.setState({indicators:n})},e.modalHandlerClose=function(){e.setState({modalOpen:!1})},e.modalHandlerOpen=function(t){for(var a in t.preventDefault(),e.state.indicators){var r=Object(R.a)({},e.state.indicators);if(""===r[a].value||0===r[a].value){var n=Object(R.a)({},e.state.indicators);n[a].valid=!1,e.setState({indicators:n}),e.setState({indicatorsValid:!1})}}e.state.indicators.electricityDay.valid&&e.state.indicators.electricityNight.valid&&e.state.indicators.coldWaterKitchen.valid&&e.state.indicators.coldWaterBathroom.valid&&e.state.indicators.hotWaterKitchen.valid&&e.state.indicators.hotWaterBathroom.valid&&e.setState({modalOpen:!0})},e.sendEmailHandler=function(){var t={recipient:e.props.userDetails.accountantEmail,address:e.props.userDetails.address,month:G[e.state.monthYear.month].text,year:e.state.monthYear.year,electricityDay:e.state.indicators.electricityDay.value,electricityNight:e.state.indicators.electricityNight.value,coldWaterKitchen:e.state.indicators.coldWaterKitchen.value,coldWaterBathroom:e.state.indicators.coldWaterBathroom.value,hotWaterKitchen:e.state.indicators.hotWaterKitchen.value,hotWaterBathroom:e.state.indicators.hotWaterBathroom.value};console.log(t),$.a.send(J.SERVICE_ID,J.TEMPLATE_ID,t,J.USER_ID).then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)}))},e.sendIndicators=function(){var t=new Date(Date.UTC(e.state.monthYear.year,e.state.monthYear.month,1,5)).setUTCHours(0,0,0,0);console.log(new Date(t).toUTCString());var a={electricity:{day:e.state.indicators.electricityDay.value,night:e.state.indicators.electricityNight.value},coldWater:{kitchen:e.state.indicators.coldWaterKitchen.value,bathroom:e.state.indicators.coldWaterBathroom.value},hotWater:{kitchen:e.state.indicators.hotWaterKitchen.value,bathroom:e.state.indicators.hotWaterBathroom.value},currentDate:{today:new Date(t).toUTCString(),year:e.state.monthYear.year},userId:localStorage.getItem("userId")},r=localStorage.getItem("token");z.post("/indicators.json?auth=".concat(r),a).then((function(t){console.log(t),e.setState({modalOpen:!1}),e.state.sendDataToAccountant&&e.sendEmailHandler(),e.props.history.push("/outlay")})).catch((function(e){console.log(e)}))},e.getCurrentMonth=function(){return(new Date).getMonth()},e.getCurrentYear=function(){for(var e=(new Date).getFullYear(),t=[],a=2;a>=0;a--)t.push({key:e-a,text:e-a,value:e-a});return t},e.setStateMonth=function(t,a){var r=a,n=Object(R.a)({},e.state.monthYear);n.month=r,e.setState({monthYear:n})},e.setStateYear=function(t,a){var r=a,n=Object(R.a)({},e.state.monthYear);n.year=r,e.setState({monthYear:n})},e.switchChange=function(){e.setState({sendDataToAccountant:!e.state.sendDataToAccountant})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f";return n.a.createElement("div",null,n.a.createElement(ee.a,{open:this.state.modalOpen,onClose:this.modalHandlerClose,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(re.a,{id:"alert-dialog-title",align:"center"},"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0437\u0430"," ",G[this.state.monthYear.month].text," ",this.state.monthYear.year," \u0433."),n.a.createElement(ae.a,{dividers:!0},n.a.createElement(h.a,{container:!0,spacing:1},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h6",align:"center"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0414\u0435\u043d\u044c:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.electricityDay.value)),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u041d\u043e\u0447\u044c:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.electricityNight.value)),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h6",align:"center"},"\u041a\u0443\u0445\u043d\u044f")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.coldWaterKitchen.value)),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.hotWaterKitchen.value)),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h6",align:"center"},"\u0412\u0430\u043d\u043d\u0430\u044f")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.coldWaterBathroom.value)),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:")),n.a.createElement(h.a,{item:!0,xs:3},n.a.createElement(S.a,{variant:"body1",align:"center"},this.state.indicators.hotWaterBathroom.value)),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(ve,{label:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u044e",checked:this.state.sendDataToAccountant,switchChange:this.switchChange})))),n.a.createElement(te.a,null,n.a.createElement(ne.a,{onClick:this.modalHandlerClose,color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),n.a.createElement(ne.a,{onClick:this.sendIndicators,color:"primary",autoFocus:!0},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u041f\u043e\u0434\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),n.a.createElement(ie.a,{className:"card"},n.a.createElement(le.a,{className:"cardPadding"},n.a.createElement(h.a,{container:!0,spacing:2},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u041c\u0435\u0441\u044f\u0446 \u0438 \u0433\u043e\u0434")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(oe.a,{style:{width:"100%"}},n.a.createElement(ce.a,null,"\u041c\u0435\u0441\u044f\u0446"),n.a.createElement(se.a,{value:this.state.monthYear.month||0,onChange:function(t){return e.setStateMonth(t,t.target.value)}},G.map((function(e){return n.a.createElement(de.a,{key:e.key,value:e.value},e.text)}))))),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(oe.a,{style:{width:"100%"}},n.a.createElement(ce.a,null,"\u0413\u043e\u0434"),n.a.createElement(se.a,{value:this.state.monthYear.year||2020,onChange:function(t){return e.setStateYear(t,t.target.value)}},this.getCurrentYear().map((function(e){return n.a.createElement(de.a,{key:e.key,value:e.value},e.text)})))))),n.a.createElement(h.a,{container:!0,spacing:2},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{style:{width:"100%"},variant:"standard",label:"\u0414\u0435\u043d\u044c",currencySymbol:"",value:this.state.indicators.electricityDay.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("electricityDay",a)},error:!this.state.indicators.electricityDay.valid,helperText:this.state.indicators.electricityDay.valid?null:t})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{style:{width:"100%"},variant:"standard",label:"\u041d\u043e\u0447\u044c",currencySymbol:"",value:this.state.indicators.electricityNight.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("electricityNight",a)},error:!this.state.indicators.electricityNight.valid,helperText:this.state.indicators.electricityNight.valid?null:t}))),n.a.createElement(h.a,{container:!0,spacing:2},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u041a\u0443\u0445\u043d\u044f")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{style:{width:"100%"},variant:"standard",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.coldWaterKitchen.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("coldWaterKitchen",a)},error:!this.state.indicators.coldWaterKitchen.valid,helperText:this.state.indicators.coldWaterKitchen.valid?null:t})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{style:{width:"100%"},variant:"standard",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.hotWaterKitchen.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("hotWaterKitchen",a)},error:!this.state.indicators.hotWaterKitchen.valid,helperText:this.state.indicators.hotWaterKitchen.valid?null:t}))),n.a.createElement(h.a,{container:!0,spacing:2},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",className:"headerMargin"},"\u0412\u0430\u043d\u043d\u0430\u044f")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{style:{width:"100%"},variant:"standard",label:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.coldWaterBathroom.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("coldWaterBathroom",a)},error:!this.state.indicators.coldWaterBathroom.valid,helperText:this.state.indicators.coldWaterBathroom.valid?null:t})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{style:{width:"100%"},variant:"standard",label:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:this.state.indicators.hotWaterBathroom.value,minimumValue:"0",onChange:function(t,a){return e.addIndicatorHandler("hotWaterBathroom",a)},error:!this.state.indicators.hotWaterBathroom.valid,helperText:this.state.indicators.hotWaterBathroom.valid?null:t}))),n.a.createElement(h.a,{container:!0,justify:"center",spacing:2},n.a.createElement(h.a,{item:!0,xs:12,style:{textAlign:"center",marginTop:"15px"}},n.a.createElement(ne.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:this.modalHandlerOpen},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))))}}]),a}(r.Component),ge=Object(u.g)(Object(m.b)((function(e){return{userDetails:e.userDetails}}))(pe)),fe=a(85),be=(a(330),a(370)),Ee=Object(f.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"15px"},paragraph:{marginTop:"5px"}}})),ye=function(){var e=Ee();return n.a.createElement("div",{className:e.root},n.a.createElement(be.a,null),n.a.createElement(S.a,{className:e.paragraph},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"))},Ie=a(386),De=a(387),Oe=a(388),Se=a(389),ke=a(390),je=a(391),xe=a(162),Ce=a.n(xe),we=Object(f.a)({root:{position:"relative",marginTop:"30px"},buttonClose:{position:"absolute",right:"5px",top:"5px",padding:0}}),Te=function(e){var t=we(),a=e.indicatorsList,r=a.id,i=a.date,l=a.indicators,o=e.costNovogor,c="";switch(i.getMonth()){case 0:c="\u042f\u043d\u0432\u0430\u0440\u044c";break;case 1:c="\u0424\u0435\u0432\u0440\u0430\u043b\u044c";break;case 2:c="\u041c\u0430\u0440\u0442";break;case 3:c="\u0410\u043f\u0440\u0435\u043b\u044c";break;case 4:c="\u041c\u0430\u0439";break;case 5:c="\u0418\u044e\u043d\u044c";break;case 6:c="\u0418\u044e\u043b\u044c";break;case 7:c="\u0410\u0432\u0433\u0443\u0441\u0442";break;case 8:c="\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c";break;case 9:c="\u041e\u043a\u0442\u044f\u0431\u0440\u044c";break;case 10:c="\u041d\u043e\u044f\u0431\u0440\u044c";break;case 11:c="\u0414\u0435\u043a\u0430\u0431\u0440\u044c";break;default:c="\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"}return n.a.createElement(Se.a,{component:v.a,className:t.root},n.a.createElement(I.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(r)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Ce.a,null)),n.a.createElement(S.a,{variant:"h6",align:"center"},c," ",i.getFullYear()),n.a.createElement(Ie.a,{"aria-label":"simple table"},n.a.createElement(ke.a,null,n.a.createElement(je.a,null,n.a.createElement(Oe.a,null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"),n.a.createElement(Oe.a,{align:"center"},"\u0420\u0430\u0441\u0445\u043e\u0434"),n.a.createElement(Oe.a,{align:"center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435"))),n.a.createElement(De.a,null,l.map((function(e,t){return n.a.createElement(je.a,{key:t},n.a.createElement(Oe.a,{component:"th",scope:"row"},e.name),n.a.createElement(Oe.a,{align:"center"},e.intake),n.a.createElement(Oe.a,{align:"center"},e.outlay))})),n.a.createElement(je.a,null,n.a.createElement(Oe.a,{component:"th",scope:"row"},"\u041d\u043e\u0432\u043e\u0433\u043e\u0440"),n.a.createElement(Oe.a,{align:"center"},o)))))},Ne=a(396),We=a(385),Me=Object(f.a)({root:{flexGrow:1,marginTop:"15px",boxShadow:"none"},label:{fontSize:"1rem"}}),Ve=function(e){var t=Me(),a=n.a.useState(0),r=Object(p.a)(a,2),i=r[0],l=r[1];return n.a.createElement(v.a,{className:t.root},n.a.createElement(Ne.a,{value:i,onChange:function(t,a){l(a),e.changeCurrentYear(e.tabsList[a])},indicatorColor:"primary",textColor:"primary",centered:!0},e.tabsList.map((function(e){return n.a.createElement(We.a,{key:e,label:e,className:t.label})}))))},Ue=a(374);function He(e){return n.a.createElement(ee.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(re.a,{id:"alert-dialog-title"},e.dialogTitle),n.a.createElement(ae.a,null,n.a.createElement(Ue.a,{id:"alert-dialog-description"},e.dialogContent)),n.a.createElement(te.a,null,n.a.createElement(ne.a,{onClick:e.handleClose,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),n.a.createElement(ne.a,{onClick:e.handleContinue,color:"secondary",autoFocus:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}var Fe=a(76),_e=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={indicatorsList:null,prevIndicators:null,tariffs:null,currentYear:(new Date).getUTCFullYear(),error:null,deleteDialogOpen:!1,deleteIndicatorId:null},e.getDataFromFirebase=function(){var t=localStorage.getItem("token"),a=localStorage.getItem("userId"),r="/users.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),n="/indicators.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"'),i=z.get(r),l=z.get("/tariffs.json"),o=z.get(n);Promise.all([i,l,o]).then((function(t){console.log("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b | \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445: ",t);var a=e.getUserDetails(t[0].data),r=e.getListOfTariffs(t[1].data),n=e.getListOfIndicators(t[2].data);0!==(n=e.countOutlay(n,a)).length?e.setState({prevIndicators:a,tariffs:r,indicatorsList:n}):e.setState({prevIndicators:a,tariffs:r,error:"\u041f\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})}))},e.getUserDetails=function(e){var t=e[Object.keys(e)].prevIndicators;return[{id:"day_electricity",name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:t.electricity.day},{id:"night_electricity",name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:t.electricity.night},{id:"cold_water",name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:t.bathroom.coldWater+t.kitchen.coldWater},{id:"hot_water",name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:t.bathroom.hotWater+t.kitchen.hotWater},{id:"disposal_water",name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:t.bathroom.coldWater+t.kitchen.coldWater+t.bathroom.hotWater+t.kitchen.hotWater}]},e.getListOfTariffs=function(e){return Object.keys(e).map((function(t){var a=e[t];return a.id=t,a}))},e.getListOfIndicators=function(e){var t=Object.keys(e).map((function(t){return{id:t,date:new Date(e[t].currentDate.today),indicators:[{id:"day_electricity",name:"\u042d\u043b-\u044f \u0434\u0435\u043d\u044c:",intake:e[t].electricity.day},{id:"night_electricity",name:"\u042d\u043b-\u044f \u043d\u043e\u0447\u044c:",intake:e[t].electricity.night},{id:"cold_water",name:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430:",intake:e[t].coldWater.bathroom+e[t].coldWater.kitchen},{id:"hot_water",name:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430:",intake:e[t].hotWater.bathroom+e[t].hotWater.kitchen},{id:"disposal_water",name:"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435:",intake:e[t].coldWater.bathroom+e[t].coldWater.kitchen+e[t].hotWater.bathroom+e[t].hotWater.kitchen}]}}));return t.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),t},e.deleteItemFromIndicators=function(){var t=localStorage.getItem("token");z.delete("/indicators/".concat(e.state.deleteIndicatorId,".json?auth=").concat(t)).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteIndicatorId:null}),e.props.enqueueSnackbar("\u041e\u0431\u044a\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!",{variant:"info",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.handleDeleteDialogOpen=function(t){e.setState({deleteDialogOpen:!0,deleteIndicatorId:t})},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeIndicatorFromState(e.state.deleteIndicatorId),e.deleteItemFromIndicators(),e.handleDeleteDialogClose()},e.removeIndicatorFromState=function(t){var a=Object(fe.a)(e.state.indicatorsList);a=a.filter((function(e){return e.id!==t})),e.setState({indicatorsList:a})},e.countOutlay=function(e,t){for(var a=Object(fe.a)(e),r=function(e){a[e]===a[0]?a[e].indicators=a[e].indicators.map((function(e,a){var r=Object(R.a)({},e);return r.outlay=r.intake-t[a].intake,r})):a[e].indicators=a[e].indicators.map((function(t,r){var n=Object(R.a)({},t);return n.outlay=n.intake-a[e-1].indicators[r].intake,n}))},n=0;n<a.length;n++)r(n);return a},e.countCostNovogor=function(t,a){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=null;try{n=t.find((function(e){return"cold_water"===e.id})).outlay}catch(s){console.log("\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",s)}var i=null;try{i=t.find((function(e){return"hot_water"===e.id})).outlay}catch(s){console.log("\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",s)}var l=null;try{l=t.find((function(e){return"disposal_water"===e.id})).outlay}catch(s){console.log("\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435",s)}var o=null;try{o=e.state.tariffs.find((function(e){var t=e.name,a=e.dateStart,n=e.dateEnd;return"water"===t&&r.setDate(r.getDate()+1)>=new Date(a)&&r.setDate(r.getDate()+1)<=new Date(n)})).cost}catch(s){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u0443 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}var c=null;try{c=e.state.tariffs.find((function(e){var t=e.name,a=e.dateStart,n=e.dateEnd;return"disposal_water"===t&&r.setDate(r.getDate()+1)>=new Date(a)&&r.setDate(r.getDate()+1)<=new Date(n)})).cost}catch(s){console.log("\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...")}return console.log("\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430: ",n,"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430: ",i,"\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u0443: ",o,"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435: ",l,"\u0422\u0430\u0440\u0438\u0444 \u043d\u0430 \u0432\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435: ",c),((n+i)*o+l*c).toFixed(2)},e.changeCurrentYear=function(t){e.setState({currentYear:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getDataFromFirebase()}},{key:"render",value:function(){var e=this,t=null;t=null===this.state.indicatorsList&&null===this.state.error?n.a.createElement(ye,null):null!==this.state.indicatorsList?(t=this.state.indicatorsList.filter((function(t){return t.date.getUTCFullYear()===e.state.currentYear}))).length>0?t.map((function(t,a){return n.a.createElement(Te,{key:a,indicatorsList:t,costNovogor:e.countCostNovogor(t.indicators,t.date),handleDeleteDialogOpen:e.handleDeleteDialogOpen})})):n.a.createElement("p",{style:{textAlign:"center"}},"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 ".concat(this.state.currentYear," \u0433\u043e\u0434")):n.a.createElement("p",{style:{textAlign:"center"}},this.state.error);for(var a=[],r=(new Date).getUTCFullYear();r>=(new Date).getUTCFullYear()-1;r--)a.push(r);return n.a.createElement("div",null,n.a.createElement(He,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.","\u0451":!0}),n.a.createElement(S.a,{variant:"h4",align:"center"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"),n.a.createElement(Ve,{tabsList:a,changeCurrentYear:this.changeCurrentYear}),n.a.createElement("div",{className:"indicatorsList"},t))}}]),a}(r.Component),Ae=Object(Fe.b)(_e),Pe=a(106),Be=a(34),Le=a(394),Ye=a(275),Ke=a.n(Ye),Re=a(276),qe=a.n(Re),ze=Object(f.a)({root:{margin:"20px 0",position:"relative"},cardPadding:{paddingBottom:"16px !important",paddingTop:"26px !important"},row:{display:"flex"},textField:{width:"100%"},selectPadding:{display:"flex",flexBasis:"13rem"},buttonClose:{position:"absolute",right:"0"},buttonEdit:{position:"absolute",right:"30px"},buttonIconSuccess:{color:"#4caf50"},buttonSuccess:{"&:hover":{backgorundColor:"rgba(243, 243, 243, 0.04) !important"}}}),Ge=function(e){var t=ze(),a=e.tariff,i=a.id,l=a.name,o=a.cost,c=a.dateEnd,s=a.dateStart,d=Object(r.useState)(e.disabled),u=Object(p.a)(d,2),m=u[0],v=u[1];return n.a.createElement(ie.a,{className:t.root},m?n.a.createElement(I.a,{className:t.buttonEdit,"aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",component:"span",color:"primary",onClick:function(){return v(!1)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Ke.a,null)):n.a.createElement(I.a,{className:t.buttonEdit+" "+t.buttonSuccess,"aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){v(!0),i?e.updateItemInTariffs(i):e.insertItemToTariffs()},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(qe.a,{className:t.buttonIconSuccess})),n.a.createElement(I.a,{className:t.buttonClose,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",component:"span",color:"secondary",onClick:function(){e.handleDeleteDialogOpen(i)},disableRipple:!0,disableFocusRipple:!0},n.a.createElement(Ce.a,null)),n.a.createElement(le.a,{className:t.cardPadding},n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(oe.a,{className:t.textField},n.a.createElement(ce.a,null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),n.a.createElement(se.a,{value:l,onChange:function(t){return e.updateTariffInState(i,"name",t.target.value)},disabled:m},n.a.createElement(de.a,{value:"water"},"\u041f\u043e\u0434\u0430\u0447\u0430 \u0432\u043e\u0434\u044b"),n.a.createElement(de.a,{value:"hot_water"},"\u041f\u043e\u0434\u043e\u0433\u0440\u0435\u0432 \u0432\u043e\u0434\u044b"),n.a.createElement(de.a,{value:"disposal_water"},"\u0412\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u0435"),n.a.createElement(de.a,{value:"electricity_day"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u0434\u0435\u043d\u044c"),n.a.createElement(de.a,{value:"electricity_night"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e-\u0438\u044f. \u043d\u043e\u0447\u044c")))),n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(Z.a,{className:t.textField,label:"\u0422\u0430\u0440\u0438\u0444",currencySymbol:"\u20bd",value:o,minimumValue:"0",maximumValue:"5000",disabled:m,onChange:function(t,a){return e.updateTariffInState(i,"cost",a)}})),n.a.createElement(Be.a,{utils:Pe.a},n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(Le.a,{clearable:!0,label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d c",format:"dd.MM.yyyy",value:s,className:t.textFieldMargin+" "+t.textField,disabled:m,onChange:function(t){return e.updateTariffInState(i,"dateStart",t)}})),n.a.createElement(h.a,{item:!0,xs:6,className:t.row},n.a.createElement(Le.a,{clearable:!0,label:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u043f\u043e",format:"dd.MM.yyyy",value:c,className:t.textField,disabled:m,onChange:function(t){return e.updateTariffInState(i,"dateEnd",t)}}))))))},Xe=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={tariffs:[],deleteDialogOpen:!1,deleteTariffId:null,addButtonDisabled:!1},e.getListOfTariffs=function(){z.get("/tariffs.json").then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=Object.keys(t.data).map((function(e){var a=t.data[e];return a.id=e,a}));e.setState({tariffs:a})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.deleteItemFromTariffs=function(){z.delete("/tariffs/".concat(e.state.deleteTariffId,".json")).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({deleteTariffId:null}),e.props.enqueueSnackbar("\u041e\u0431\u044a\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!",{variant:"info",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateItemInTariffs=function(t){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438",t);var a=e.state.tariffs.find((function(e){return e.id===t})),r={cost:a.cost,dateEnd:a.dateEnd,dateStart:a.dateStart,name:a.name};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",r),z.patch("/tariffs/".concat(t,".json"),r).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.insertItemToTariffs=function(){console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438");var t=e.state.tariffs[0],a={cost:t.cost,dateEnd:t.dateEnd,dateStart:t.dateStart,name:t.name};console.log("\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",a),z.post("/tariffs.json",a).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.setState({addButtonDisabled:!1}),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.handleDeleteDialogOpen=function(t){"undefined"!==typeof t?e.setState({deleteDialogOpen:!0,deleteTariffId:t}):e.removeTariffFromState(t)},e.handleDeleteDialogClose=function(){e.setState({deleteDialogOpen:!1})},e.handleDeleteDialogContinue=function(){e.removeTariffFromState(e.state.deleteTariffId),e.deleteItemFromTariffs(),e.handleDeleteDialogClose()},e.addTariffToState=function(){var t=Object(fe.a)(e.state.tariffs);t.unshift({cost:0,dateEnd:null,dateStart:null,name:""}),e.setState({tariffs:t,addButtonDisabled:!0})},e.removeTariffFromState=function(t){var a=Object(fe.a)(e.state.tariffs);a=a.filter((function(e){return e.id!==t})),e.state.addButtonDisabled?e.setState({tariffs:a,addButtonDisabled:!1}):e.setState({tariffs:a})},e.updateTariffInState=function(t,a,r){var n=Object(fe.a)(e.state.tariffs),i=n.findIndex((function(e){return e.id===t}));n[i][a]=r,e.setState({tariffs:n})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getListOfTariffs()}},{key:"render",value:function(){var e=this,t=null;return t=0===this.state.tariffs.length?n.a.createElement(ye,null):this.state.tariffs.map((function(t,a){return n.a.createElement(Ge,{key:"undefined"!==typeof t.id?t.id:a,tariff:t,disabled:"undefined"!==typeof t.id,handleDeleteDialogOpen:e.handleDeleteDialogOpen,handleDeleteDialogContinue:e.handleDeleteDialogContinue,updateItemInTariffs:e.updateItemInTariffs,updateTariffInState:e.updateTariffInState,insertItemToTariffs:e.insertItemToTariffs})})),n.a.createElement("div",null,n.a.createElement(He,{open:this.state.deleteDialogOpen,handleClose:this.handleDeleteDialogClose,handleContinue:this.handleDeleteDialogContinue,dialogTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",dialogContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442? \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.","\u0451":!0}),n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u0422\u0430\u0440\u0438\u0444\u044b"),n.a.createElement(h.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center",alignContent:"center",wrap:"nowrap"},n.a.createElement(ne.a,{onClick:function(){return e.addTariffToState(t)},color:"primary",disabled:this.state.addButtonDisabled},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444")),t)}}]),a}(r.Component),$e=Object(Fe.b)(Xe),Je=a(65),Qe=a(393),Ze=Object(f.a)({field:{width:"100%"},buttonPosition:{textAlign:"center"}}),et=function(e){var t=Ze(),a=e.userDetails,r=a.firstName,i=a.lastName,l=a.userEmail,o=a.accountantEmail,c=a.address,s=e.prevIndicators,d=s.prevIndicatorsDate,u=s.electricityDay,m=s.electricityNight,v=s.kitchenColdWater,p=s.kitchenHotWater,g=s.bathroomColdWater,f=s.bathroomHotWater;return n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",align:"center"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Qe.a,{label:"\u0418\u043c\u044f",value:r.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("firstName",t.target.value)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Qe.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:i.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("lastName",t.target.value)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"\u0410\u0434\u0440\u0435\u0441",value:c.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("address",t.target.value)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430",value:l.value,disabled:!0,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("userEmail",t.target.value)}})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"\u041f\u043e\u0447\u0442\u0430 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u0438",value:o.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("accountantEmail",t.target.value)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(S.a,{variant:"h5",align:"center"},"\u041f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438")),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Be.a,{utils:Pe.a},n.a.createElement(Le.a,{clearable:!0,className:t.field,disabled:e.isDisabled,label:"\u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439",format:"dd.MM.yyyy",value:d.value,onChange:function(t){return e.updatePrevIndicatorsInState("prevIndicatorsDate",t)},error:!d.valid&&d.touched,helperText:!d.valid&&d.touched?d.errorMessage:null}))),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u0414\u0435\u043d\u044c",currencySymbol:"",value:u.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityDay",a)},error:!u.valid&&u.touched,helperText:!u.valid&&u.touched?u.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u041d\u043e\u0447\u044c",currencySymbol:"",value:m.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityNight",a)},error:!m.valid&&m.touched,helperText:!m.valid&&m.touched?m.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:v.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenColdWater",a)},error:!v.valid&&v.touched,helperText:!v.valid&&v.touched?v.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:p.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenHotWater",a)},error:!p.valid&&p.touched,helperText:!p.valid&&p.touched?p.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:g.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomColdWater",a)},error:!g.valid&&g.touched,helperText:!g.valid&&g.touched?g.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:f.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomHotWater",a)},error:!f.valid&&f.touched,helperText:!f.valid&&f.touched?f.errorMessage:null})),n.a.createElement(h.a,{className:t.buttonPosition,item:!0,xs:12},n.a.createElement(ne.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){e.checkFormValidity()&&e.updateUserDetails()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))},tt=Object(f.a)({root:{margin:"20px 0"},cardPadding:{padding:"16px !important"}}),at=function(e){var t=tt();return n.a.createElement(ie.a,{className:t.root},n.a.createElement(le.a,{className:t.cardPadding},e.children))},rt=function(e,t){var a={isValid:!0,errorMessage:null};if(!t)return!0;if(t.required&&(a.isValid=""!==e.trim()&&a.isValid,a.errorMessage=a.isValid?"":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),t.isEmail){a.isValid=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&a.isValid,a.errorMessage=""===e?"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}return t.isDate&&(a.isValid=null!==e&&a.isValid,a.errorMessage=a.isValid?"":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),t.isNumber&&(a.isValid=0!==e&&a.isValid,a.errorMessage=a.isValid?"":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),t.isPassord&&(a.isValid=e.length>=6&&a.isValid,e.length<6&&e.length>0?a.errorMessage="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":0===e.length?a.errorMessage="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f":a.errorMessage=""),a},nt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={userDetails:{firstName:{value:"",validation:{required:!0},valid:!0,errorMessage:"",touched:!0},lastName:{value:"",validation:{required:!0},valid:!0,errorMessage:"",touched:!0},userEmail:{value:""},accountantEmail:{value:"",validation:{isEmail:!0},valid:!0,errorMessage:"",touched:!0},address:{value:"",validation:{required:!0},valid:!0,errorMessage:"",touched:!0}},userDetailsValid:!1,prevIndicators:{prevIndicatorsDate:{value:null,validation:{isDate:!0},valid:!0,errorMessage:"",touched:!0},electricityDay:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},electricityNight:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},kitchenColdWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},kitchenHotWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},bathroomColdWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0},bathroomHotWater:{value:"",validation:{isNumber:!0},valid:!0,errorMessage:"",touched:!0}},prevIndicatorsValid:!1,userId:null},e.getUserDetails=function(t){console.log("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e UserId: ",t);var a=localStorage.getItem("token");z.get("/users.json?auth=".concat(a,'&orderBy="userId"&equalTo="').concat(t,'"')).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data);var a=t.data[Object.keys(t.data)],r=Object(R.a)(Object(R.a)({},e.state.userDetails),{},{firstName:Object(R.a)(Object(R.a)({},e.state.userDetails.firstName),{},{value:a.userDetails.firstName}),lastName:Object(R.a)(Object(R.a)({},e.state.userDetails.lastName),{},{value:a.userDetails.lastName}),userEmail:Object(R.a)(Object(R.a)({},e.state.userDetails.userEmail),{},{value:a.userDetails.userEmail}),accountantEmail:Object(R.a)(Object(R.a)({},e.state.userDetails.accountantEmail),{},{value:a.userDetails.accountantEmail}),address:Object(R.a)(Object(R.a)({},e.state.userDetails.address),{},{value:a.userDetails.address})}),n=Object(R.a)(Object(R.a)({},e.state.prevIndicators),{},{prevIndicatorsDate:Object(R.a)(Object(R.a)({},e.state.prevIndicators.prevIndicatorsDate),{},{value:a.prevIndicators.prevIndicatorsDate}),electricityDay:Object(R.a)(Object(R.a)({},e.state.prevIndicators.electricityDay),{},{value:a.prevIndicators.electricity.day}),electricityNight:Object(R.a)(Object(R.a)({},e.state.prevIndicators.electricityNight),{},{value:a.prevIndicators.electricity.night}),kitchenColdWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.kitchenColdWater),{},{value:a.prevIndicators.kitchen.coldWater}),kitchenHotWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.kitchenHotWater),{},{value:a.prevIndicators.kitchen.hotWater}),bathroomColdWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.bathroomColdWater),{},{value:a.prevIndicators.bathroom.coldWater}),bathroomHotWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.bathroomHotWater),{},{value:a.prevIndicators.bathroom.hotWater})});e.setState({userDetails:r,prevIndicators:n,id:Object.keys(t.data)[0]})})).catch((function(t){console.log(t),e.setState({error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."})}))},e.updateUserDetails=function(){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u043f\u043e Id: ",e.state.id);var t=localStorage.getItem("token"),a={userDetails:{firstName:e.state.userDetails.firstName.value,lastName:e.state.userDetails.lastName.value,userEmail:e.state.userDetails.userEmail.value,accountantEmail:e.state.userDetails.accountantEmail.value,address:e.state.userDetails.address.value},prevIndicators:{prevIndicatorsDate:e.state.prevIndicators.prevIndicatorsDate.value,electricity:{day:e.state.prevIndicators.electricityDay.value,night:e.state.prevIndicators.electricityNight.value},kitchen:{coldWater:e.state.prevIndicators.kitchenColdWater.value,hotWater:e.state.prevIndicators.kitchenHotWater.value},bathroom:{coldWater:e.state.prevIndicators.bathroomColdWater.value,hotWater:e.state.prevIndicators.bathroomHotWater.value}},userId:localStorage.getItem("userId")};z.patch("/users/".concat(e.state.id,".json?auth=").concat(t),a).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.data),e.props.enqueueSnackbar("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!",{variant:"success",preventDuplicate:!0})})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ",e)}))},e.updateUserDataInState=function(t,a){var r=rt(a,e.state.userDetails[t].validation),n=Object(R.a)(Object(R.a)({},e.state.userDetails),{},Object(Je.a)({},t,Object(R.a)(Object(R.a)({},e.state.userDetails[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity();e.setState({userDetails:n,userDetailsValid:i})},e.updatePrevIndicatorsInState=function(t,a){var r=rt(a,e.state.prevIndicators[t].validation),n=Object(R.a)(Object(R.a)({},e.state.prevIndicators),{},Object(Je.a)({},t,Object(R.a)(Object(R.a)({},e.state.prevIndicators[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity();e.setState({prevIndicators:n,prevIndicatorsValid:i})},e.checkFormValidity=function(){var t=e.state.userDetails,a=t.firstName,r=t.lastName,n=t.accountantEmail,i=t.address,l=e.state.prevIndicators,o=l.prevIndicatorsDate,c=l.electricityDay,s=l.electricityNight,d=l.kitchenColdWater,u=l.kitchenHotWater,m=l.bathroomColdWater,h=l.bathroomHotWater;return!!(a.valid&&r.valid&&n.valid&&i.valid&&o.valid&&c.valid&&s.valid&&d.valid&&u.valid&&m.valid&&h.valid)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getUserDetails(localStorage.getItem("userId"))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),null===this.state.userDetails?n.a.createElement(ye,null):n.a.createElement(at,null,n.a.createElement(et,{userDetails:this.state.userDetails,prevIndicators:this.state.prevIndicators,updateUserDataInState:this.updateUserDataInState,updatePrevIndicatorsInState:this.updatePrevIndicatorsInState,checkFormValidity:this.checkFormValidity,updateUserDetails:this.updateUserDetails})))}}]),a}(r.Component),it=Object(Fe.b)(nt),lt=function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}},ot=function(e){return{type:"AUTH_FAIL",error:e}},ct=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},st=function(e){return function(t){setTimeout((function(){t(ct())}),1e3*e)}},dt=function(){return function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");z.get("/users.json?auth=".concat(t,'&orderBy="userId"&equalTo="').concat(a,'"')).then((function(t){console.log(t);var a,r,n,i=t.data[Object.keys(t.data)];e((a=i.userDetails,r=i.prevIndicators,n=Object.keys(t.data)[0],{type:"LOAD_USERDATA_SUCCESS",userDetails:a,prevIndicators:r,userIdDb:n}))})).catch((function(e){console.log(e)}))}},ut=(a(331),a(279)),mt=a.n(ut),ht=a(197),vt=Object(f.a)((function(e){return Object(ht.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),pt=function(e){var t=vt();return n.a.createElement(Qe.a,Object.assign({className:t.root,variant:"outlined",inputProps:{className:t.input}},e))},gt=a(378),ft=a(277),bt=a.n(ft),Et=a(278),yt=a.n(Et),It=Object(f.a)((function(e){return Object(ht.a)({root:{margin:"10px 0",width:"100%"},input:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 30px white inset !important"}}})})),Dt=function(e){var t=It(),a=n.a.useState({showPassword:!1}),r=Object(p.a)(a,2),i=r[0],l=r[1];return n.a.createElement(Qe.a,Object.assign({className:t.root,variant:"outlined",type:i.showPassword?"text":"password",inputProps:{className:t.input},InputProps:{endAdornment:n.a.createElement(gt.a,{position:"end"},n.a.createElement(I.a,{"aria-label":"toggle password visibility",onClick:function(){l(Object(R.a)(Object(R.a)({},i),{},{showPassword:!i.showPassword}))},edge:"end"},i.showPassword?n.a.createElement(bt.a,null):n.a.createElement(yt.a,null)))}},e))},Ot=a(4),St=Object(Ot.a)({root:{width:"100%",textTransform:"none",margin:"30px 0 10px 0"}})(ne.a),kt=function(e){return n.a.createElement(St,Object.assign({variant:"contained",color:"primary"},e),e.children)},jt=a(395),xt=Object(Ot.a)({root:{marginBottom:"10px"}})(jt.a),Ct=function(e){return n.a.createElement(xt,e,e.children)},wt=a(379),Tt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:"",rememberMe:!1,validateFields:{email:!1,password:!1},fieldValidationErrors:{email:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!",password:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"},willSend:!0},e.inputHandler=function(t){var a=t.target.name,r=t.target.value;e.validation(a,r),e.setState(Object(Je.a)({},a,r))},e.validation=function(t,a){var r=Object(R.a)({},e.state.validateFields),n=Object(R.a)({},e.state.fieldValidationErrors);switch(t){case"email":r.email=/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(a),0===a.length?n.email="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!":n.email="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0447\u0442\u044b";break;case"password":r.password=a.length>=6,0===a.length?n.password="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!":n.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}e.setState({validateFields:r,fieldValidationErrors:n})},e.checkboxHandler=function(){var t=e.state.rememberMe;e.setState({rememberMe:!t})},e.formSenderHandler=function(){e.state.validateFields.email&&e.state.validateFields.password?(e.setState({willSend:!0}),e.props.onAuth(e.state.email,e.state.password)):e.setState({willSend:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=!1,t=!1;return this.state.willSend||(e=!this.state.validateFields.email,t=!this.state.validateFields.password),n.a.createElement("div",{className:"auth_container"},n.a.createElement("form",null,n.a.createElement("div",{className:"lockIconContainer"},n.a.createElement("div",{className:"roundIcon"},n.a.createElement(mt.a,null))),n.a.createElement(S.a,{className:"authHeader",variant:"h5",align:"center"},"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043a\u043e\u043c\u043c\u0443\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439"),this.props.errorMessage?n.a.createElement(Ct,{severity:"error"},this.props.errorMessage):null,n.a.createElement(pt,{key:"email",id:"email",label:"\u041f\u043e\u0447\u0442\u0430",name:"email",error:e,helperText:e?this.state.fieldValidationErrors.email:null,onChange:this.inputHandler,value:this.state.email}),n.a.createElement(Dt,{key:"password",id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",error:t,helperText:t?this.state.fieldValidationErrors.password:null,onChange:this.inputHandler,value:this.state.password}),n.a.createElement(kt,{onClick:this.formSenderHandler},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),n.a.createElement(S.a,null,n.a.createElement(wt.a,{component:g.b,to:"/registration",variant:"body2"},"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))}}]),a}(r.Component),Nt=Object(m.b)((function(e){return{isAuth:null!==e.token,loading:e.loading,errorMessage:e.error}}),(function(e){return{onAuth:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"});var r={email:e,password:t,returnSecureToken:!0},n="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(J.AUTH_API_KEY);z.post(n,r).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),a(lt(e.data.idToken,e.data.localId)),a(st(e.data.expiresIn))})).catch((function(e){console.log(e),a(ot(e.response.data.error))}))}}(t,a))}}}))(Tt),Wt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onLogout(this.props.history)}},{key:"render",value:function(){return n.a.createElement(u.a,{to:"/"})}}]),a}(r.Component),Mt=Object(m.b)(null,(function(e){return{onLogout:function(){return e(ct())}}}))(Wt),Vt=a(383),Ut=a(381),Ht=a(382),Ft=function(e){var t=e.userDetails,a=t.firstName,r=t.lastName,i=t.userEmail,l=t.password,o=t.accountantEmail,c=t.address;return n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"Email",disabled:e.isDisabled,value:i.value,type:"email",autoComplete:"off",fullWidth:!0,onChange:function(t){return e.updateUserDataInState("userEmail",t.target.value)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:e.isDisabled,value:l.value,type:"password",autoComplete:"new-password",fullWidth:!0,onChange:function(t){return e.updateUserDataInState("password",t.target.value)},error:!l.valid&&l.touched,helperText:!l.valid&&l.touched?l.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Qe.a,{fullWidth:!0,label:"\u0418\u043c\u044f",value:a.value,onChange:function(t){return e.updateUserDataInState("firstName",t.target.value)},disabled:e.isDisabled,error:!a.valid&&a.touched,helperText:!a.valid&&a.touched?a.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Qe.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",disabled:e.isDisabled,value:r.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("lastName",t.target.value)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"\u0410\u0434\u0440\u0435\u0441",disabled:e.isDisabled,value:c.value,fullWidth:!0,onChange:function(t){return e.updateUserDataInState("address",t.target.value)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Qe.a,{label:"\u041f\u043e\u0447\u0442\u0430 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u0438",disabled:e.isDisabled,value:o.value,type:"email",fullWidth:!0,onChange:function(t){return e.updateUserDataInState("accountantEmail",t.target.value)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})))},_t=Object(f.a)({field:{width:"100%"}}),At=function(e){var t=_t(),a=e.prevIndicators,r=a.prevIndicatorsDate,i=a.electricityDay,l=a.electricityNight,o=a.kitchenColdWater,c=a.kitchenHotWater,s=a.bathroomColdWater,d=a.bathroomHotWater;return n.a.createElement(h.a,{container:!0,spacing:3},n.a.createElement(h.a,{item:!0,xs:12},n.a.createElement(Be.a,{utils:Pe.a},n.a.createElement(Le.a,{clearable:!0,className:t.field,disabled:e.isDisabled,label:"\u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439",format:"dd.MM.yyyy",value:r.value,onChange:function(t){return e.updatePrevIndicatorsInState("prevIndicatorsDate",t)},error:!r.valid&&r.touched,helperText:!r.valid&&r.touched?r.errorMessage:null}))),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u0414\u0435\u043d\u044c",currencySymbol:"",value:i.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityDay",a)},error:!i.valid&&i.touched,helperText:!i.valid&&i.touched?i.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f: \u041d\u043e\u0447\u044c",currencySymbol:"",value:l.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("electricityNight",a)},error:!l.valid&&l.touched,helperText:!l.valid&&l.touched?l.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:o.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenColdWater",a)},error:!o.valid&&o.touched,helperText:!o.valid&&o.touched?o.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u041a\u0443\u0445\u043d\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:c.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("kitchenHotWater",a)},error:!c.valid&&c.touched,helperText:!c.valid&&c.touched?c.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:s.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomColdWater",a)},error:!s.valid&&s.touched,helperText:!s.valid&&s.touched?s.errorMessage:null})),n.a.createElement(h.a,{item:!0,xs:6},n.a.createElement(Z.a,{className:t.field,disabled:e.isDisabled,label:"\u0412\u0430\u043d\u043d\u0430\u044f: \u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",currencySymbol:"",value:d.value,minimumValue:"0",onChange:function(t,a){return e.updatePrevIndicatorsInState("bathroomHotWater",a)},error:!d.valid&&d.touched,helperText:!d.valid&&d.touched?d.errorMessage:null})))},Pt=Object(f.a)((function(e){return{root:{width:"100%","& .MuiStepper-root":{padding:"24px 0 0 0"}},stepLabel:{wordBreak:"break-word"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var Bt=function(e){var t=Pt(),a=n.a.useState(0),r=Object(p.a)(a,2),i=r[0],l=r[1],o=["\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438","\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"];return n.a.createElement("div",{className:t.root},n.a.createElement(Vt.a,{activeStep:i,alternativeLabel:!0},o.map((function(e){return n.a.createElement(Ut.a,{key:e},n.a.createElement(Ht.a,{classes:{root:t.stepLabel}},e))}))),n.a.createElement("div",null,i===o.length?n.a.createElement("div",null,n.a.createElement(S.a,{className:t.instructions},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"),n.a.createElement(ne.a,{variant:"contained",color:"primary",component:g.b,to:"/auth"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443")):n.a.createElement("div",null,n.a.createElement(at,null,function(t){switch(t){case 0:return n.a.createElement(Ft,{userDetails:e.userDetails,updateUserDataInState:e.updateUserDataInState,isDisabled:!1});case 1:return n.a.createElement(At,{prevIndicators:e.prevIndicators,updatePrevIndicatorsInState:e.updatePrevIndicatorsInState,isDisabled:!1});case 2:return n.a.createElement("div",null,n.a.createElement(S.a,{variant:"h5",align:"center",style:{padding:"0 0 20px 0"}},"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),n.a.createElement(Ft,{userDetails:e.userDetails,updateUserDataInState:e.updateUserDataInState,isDisabled:!0}),n.a.createElement(S.a,{variant:"h5",align:"center",style:{padding:"20px 0"}},"\u041f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438"),n.a.createElement(At,{prevIndicators:e.prevIndicators,updatePrevIndicatorsInState:e.updatePrevIndicatorsInState,isDisabled:!0}));default:return"Unknown stepIndex"}}(i,e.updateUserDataInState,e.updatePrevIndicatorsInState,e.userDetails,e.prevIndicators)),n.a.createElement("div",{style:{marginBottom:"20px"}},n.a.createElement(ne.a,{disabled:0===i,onClick:function(){l((function(e){return e-1}))},className:t.backButton},"\u041d\u0430\u0437\u0430\u0434"),n.a.createElement(ne.a,{variant:"contained",color:"primary",onClick:function(){0===i&&(e.userDetailsValid?l((function(e){return e+1})):e.checkFormValidity("userDetails")),1===i&&(e.prevIndicatorsValid?l((function(e){return e+1})):e.checkFormValidity("prevIndicators")),2===i&&e.registration()}},i===o.length-1?"\u0413\u043e\u0442\u043e\u0432\u043e":"\u0414\u0430\u043b\u0435\u0435")))))},Lt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={userDetails:{firstName:{value:"",validation:{required:!0},valid:!1,errorMessage:"",touched:!1},lastName:{value:"",validation:{required:!0},valid:!1,touched:!1},userEmail:{value:"",validation:{isEmail:!0},valid:!1,touched:!1},password:{value:"",validation:{isPassord:!0},valid:!1,touched:!1},accountantEmail:{value:"",validation:{isEmail:!0},valid:!1,touched:!1},address:{value:"",validation:{required:!0},valid:!1,touched:!1}},userDetailsValid:!1,prevIndicators:{prevIndicatorsDate:{value:null,validation:{isDate:!0},valid:!1,errorMessage:"",touched:!1},electricityDay:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},electricityNight:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},kitchenColdWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},kitchenHotWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},bathroomColdWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1},bathroomHotWater:{value:"",validation:{isNumber:!0},valid:!1,errorMessage:"",touched:!1}},prevIndicatorsValid:!1},e.registration=function(){var t={userDetails:{firstName:e.state.userDetails.firstName.value,lastName:e.state.userDetails.lastName.value,userEmail:e.state.userDetails.userEmail.value,accountantEmail:e.state.userDetails.accountantEmail.value,address:e.state.userDetails.address.value},prevIndicators:{prevIndicatorsDate:e.state.prevIndicators.prevIndicatorsDate.value,electricity:{day:e.state.prevIndicators.electricityDay.value,night:e.state.prevIndicators.electricityNight.value},kitchen:{coldWater:e.state.prevIndicators.kitchenColdWater.value,hotWater:e.state.prevIndicators.kitchenHotWater.value},bathroom:{coldWater:e.state.prevIndicators.bathroomColdWater.value,hotWater:e.state.prevIndicators.bathroomHotWater.value}}};e.props.onRegistration(e.state.userDetails.userEmail.value,e.state.userDetails.password.value,t)},e.updateUserDataInState=function(t,a){var r=rt(a,e.state.userDetails[t].validation),n=Object(R.a)(Object(R.a)({},e.state.userDetails),{},Object(Je.a)({},t,Object(R.a)(Object(R.a)({},e.state.userDetails[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity("userDetails",n);e.setState({userDetails:n,userDetailsValid:i})},e.updatePrevIndicatorsInState=function(t,a){var r=rt(a,e.state.prevIndicators[t].validation),n=Object(R.a)(Object(R.a)({},e.state.prevIndicators),{},Object(Je.a)({},t,Object(R.a)(Object(R.a)({},e.state.prevIndicators[t]),{},{value:a,valid:r.isValid,errorMessage:r.errorMessage,touched:!0}))),i=e.checkFormValidity("prevIndicators",n);e.setState({prevIndicators:n,prevIndicatorsValid:i})},e.checkFormValidity=function(t,a){if("userDetails"===t&&"undefined"!==typeof a){var r=a.firstName,n=a.lastName,i=a.userEmail,l=a.password,o=a.accountantEmail,c=a.address;if(r.valid&&n.valid&&i.valid&&l.valid&&o.valid&&c.valid)return!0}if("userDetails"===t&&"undefined"===typeof a){var s=Object(R.a)(Object(R.a)({},e.state.userDetails),{},{firstName:Object(R.a)(Object(R.a)({},e.state.userDetails.firstName),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),lastName:Object(R.a)(Object(R.a)({},e.state.userDetails.lastName),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),userEmail:Object(R.a)(Object(R.a)({},e.state.userDetails.userEmail),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),password:Object(R.a)(Object(R.a)({},e.state.userDetails.password),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),accountantEmail:Object(R.a)(Object(R.a)({},e.state.userDetails.accountantEmail),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),address:Object(R.a)(Object(R.a)({},e.state.userDetails.address),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})});e.setState({userDetails:s})}if("prevIndicators"===t&&"undefined"!==typeof a){var d=a.prevIndicatorsDate,u=a.electricityDay,m=a.electricityNight,h=a.kitchenColdWater,v=a.kitchenHotWater,p=a.bathroomColdWater,g=a.bathroomHotWater;if(d.valid&&u.valid&&m.valid&&h.valid&&v.valid&&p.valid&&g.valid)return!0}if("prevIndicators"===t&&"undefined"===typeof a){var f=Object(R.a)(Object(R.a)({},e.state.prevIndicators),{},{prevIndicatorsDate:Object(R.a)(Object(R.a)({},e.state.prevIndicators.prevIndicatorsDate),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),electricityDay:Object(R.a)(Object(R.a)({},e.state.prevIndicators.electricityDay),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),electricityNight:Object(R.a)(Object(R.a)({},e.state.prevIndicators.electricityNight),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),kitchenColdWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.kitchenColdWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),kitchenHotWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.kitchenHotWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),bathroomColdWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.bathroomColdWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),bathroomHotWater:Object(R.a)(Object(R.a)({},e.state.prevIndicators.bathroomHotWater),{},{touched:!0,errorMessage:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})});e.setState({prevIndicators:f})}return!1},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(S.a,{style:{position:"absolute",top:"10px",right:"15px"}},n.a.createElement(wt.a,{component:g.b,to:"/auth",variant:"body2"},"\u0412\u043e\u0439\u0442\u0438")),n.a.createElement(S.a,{variant:"h4",align:"center",style:{marginBottom:"10px"}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),this.props.errorMessage?n.a.createElement(jt.a,{severity:"error"},this.props.errorMessage):null,n.a.createElement(Bt,{userDetails:this.state.userDetails,userDetailsValid:this.state.userDetailsValid,prevIndicators:this.state.prevIndicators,prevIndicatorsValid:this.state.prevIndicatorsValid,updateUserDataInState:this.updateUserDataInState,updatePrevIndicatorsInState:this.updatePrevIndicatorsInState,checkFormValidity:this.checkFormValidity,registration:this.registration}))}}]),a}(r.Component),Yt=Object(m.b)((function(e){return{errorMessage:e.error}}),(function(e){return{onRegistration:function(t,a,r){return e(function(e,t,a){return function(r){r({type:"AUTH_START"});var n={email:e,password:t,returnSecureToken:!0},i="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(J.AUTH_API_KEY);z.post(i,n).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),r(lt(e.data.idToken,e.data.localId)),r(st(e.data.expiresIn)),a.userId=e.data.localId,z.post("/users.json?auth=".concat(e.data.idToken),a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),r(ot(e.response.data.error))}))}}(t,a,r))}}}))(Lt),Kt=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var e=n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/auth",component:Nt}),n.a.createElement(u.b,{path:"/registration",component:Yt}),n.a.createElement(u.a,{to:"/auth"}));return localStorage.getItem("userId")&&(e=n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/outlay",component:Ae}),n.a.createElement(u.b,{path:"/send-indicators",component:ge}),n.a.createElement(u.b,{path:"/tariffs",component:$e}),n.a.createElement(u.b,{path:"/profile",component:it}),n.a.createElement(u.b,{path:"/logout",component:Mt}),n.a.createElement(u.a,{to:"/send-indicators"}))),n.a.createElement(K,{isAuth:this.props.isAuth},e)}}]),a}(r.Component),Rt=Object(m.b)((function(e){return{isAuth:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(ct());else{var r=localStorage.getItem("userId");e(lt(t,r)),e(st((a.getTime()-(new Date).getTime())/1e3)),e(dt())}}else e(ct())}))}}}))(Kt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qt=a(107),zt=a(280),Gt=function(e,t){return Object(R.a)(Object(R.a)({},e),t)},Xt={token:null,userId:null,error:null,loading:!1,userDetails:null,prevIndicators:null,userIdDb:null},$t=function(e){return Gt(e,{error:null,loading:!0})},Jt=function(e,t){return Gt(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},Qt=function(e,t){var a;return console.log(t.error),a=401===t.error.code?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443":400===t.error.code&&"EMAIL_EXISTS"===t.error.message?"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":400===t.error.code&&"EMAIL_NOT_FOUND"===t.error.message?"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0435\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",Gt(e,{error:a,loading:!1})},Zt=function(e){return Gt(e,{token:null,userId:null})},ea=function(e,t){return Gt(e,{userDetails:t.userDetails,prevIndicators:t.prevIndicators,userIdDb:t.userIdDb})},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return $t(e);case"AUTH_SUCCESS":return Jt(e,t);case"AUTH_FAIL":return Qt(e,t);case"AUTH_LOGOUT":return Zt(e);case"LOAD_USERDATA_SUCCESS":return ea(e,t);default:return e}},aa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qt.c,ra=Object(qt.d)(ta,aa(Object(qt.a)(zt.a))),na=n.a.createElement(m.a,{store:ra},n.a.createElement(g.a,{basename:"/"},n.a.createElement(Fe.a,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"right"}},n.a.createElement(Rt,null))));l.a.render(na,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e){e.exports=JSON.parse('{"SERVICE_ID":"gmail","TEMPLATE_ID":"template_83dCi3ca","USER_ID":"user_rEIgP6Z8hPXkwIosFYkR7","AUTH_API_KEY":"AIzaSyCQ-YIBbLpl1SOF7KzaSR0v7HLz61N-yno"}')}},[[294,1,2]]]);
//# sourceMappingURL=main.6e190ac6.chunk.js.map